# Hello! I'm a Junior developer ğŸ‘‹ğŸ˜Š
> ì•ˆë…•í•˜ì„¸ìš”. ìƒˆë¡œìš´ ê¸°ìˆ  ê°œë°œë¡œ ê¾¸ì¤€íˆ ì„±ì¥í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ë‹¬ë¦¬ê³  ìˆëŠ” ì‹ ì… ê°œë°œì ì§„ì •í¬ ì…ë‹ˆë‹¤.  
> 3D ê·¸ë˜í”½ ê°œë°œìì—ì„œ ì›¹ í”„ë¡œê·¸ë˜ë¨¸ë¡œ ìƒˆë¡œìš´ ê¸¸ì„ ë§Œë“¤ì–´ ë‚˜ê°€ëŠ” ì¤‘ì¸ ë§Œí¼ 
> ë„ì „ì„ ë©ˆì¶”ì§€ ì•Šê³  ê¸ì •ì ì¸ ë§ˆì¸ë“œë¡œ ì†Œí†µí•˜ëŠ” ê°œë°œìê°€ ë˜ê² ìŠµë‹ˆë‹¤.


# Project01. ê°œë°œì¼ì§€ğŸ’»
> 2021.06  
> ê°œë°œì¸ì› : 1ëª…
> 
> 'boardbell'ì€ 'ì†Œí†µì„ ì „í•˜ë‹¤'ë¼ëŠ” ì˜ë¯¸ë¡œ ëª¨ë“  ìœ ì €ë“¤ì´ ììœ ë¡­ê²Œ ê¸€ì„ ì“°ê³  ì·¨í–¥ì„ ì°¾ì•„ ê·¸ê²ƒì„ ì¦ê¸¸ìˆ˜ ìˆëŠ” ê³µê°„ì„ ë§Œë“¤ì–´ ì‚¶ì— ì†Œì†Œí•œ ì¬ë¯¸ë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì§€í–¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.

> **í”„ë¡œì íŠ¸ êµ¬í˜„ ì£¼ì†Œ**:yellow_heart: https://boardbell.shop/  
> **ì‹œì—°ì˜ìƒ**:purple_heart: https://youtu.be/XVMs_Q4wtlc


## ğŸ› ê°œë°œí™˜ê²½ğŸ› 
<img src="https://img.shields.io/badge/Java-ea0016?style=flat-square&logo=Java&logoColor=white&width=300"> <img src="https://img.shields.io/badge/Spring-f26822?style=flat-square&logo=Spring&logoColor=white"/> <img src="https://img.shields.io/badge/tomcat8.5-7ed321?style=flat-square&logo=ApacheTomcat&logoColor=white"/> <img src="https://img.shields.io/badge/Oracle-00aeef?style=flat-square&logo=Oracle&logoColor=white"/> <img src="https://img.shields.io/badge/HTML-9187ff?style=flat-square&logo=HTML5&logoColor=white"/>

<img src="https://img.shields.io/badge/CSS-ff6384?style=flat-square&logo=CSS3&logoColor=white"/> <img src="https://img.shields.io/badge/Javascript-9187ff?style=flat-square&logo=Javascript&logoColor=white"/> <img src="https://img.shields.io/badge/JSP-00aeef?style=flat-square"/> <img src="https://img.shields.io/badge/JSTL-3333ff?style=flat-square"/> <img src="https://img.shields.io/badge/MyBatis-9933cc?style=flat-square"/> <img src="https://img.shields.io/badge/Ajax-2bb24c?style=flat-square"/>

<img src="https://img.shields.io/badge/jQuery-179c7d?style=flat-square&logo=jQuery&logoColor=white"/> <img src="https://img.shields.io/badge/AWS-343434?style=flat-square&logo=AmazonAWS&logoColor=white"/> <img src="https://img.shields.io/badge/OpenWeather-ff6384?style=flat-square"/> <img src="https://img.shields.io/badge/WebSocket-3333ff?style=flat-square"/>


## í”„ë¡œì íŠ¸ êµ¬ì„±ğŸ“–
* **DB ëª¨ë¸ë§**  
![DB](https://user-images.githubusercontent.com/61307201/124126911-1bc91c80-dab6-11eb-9926-3a0e49231428.JPG)

* **ì‚¬ìš©ì ì´ìš© êµ¬ì¡°ë„**  
![user](https://user-images.githubusercontent.com/61307201/124128652-f3dab880-dab7-11eb-8994-9ece147531c8.JPG)

* **ê´€ë¦¬ì ì´ìš© êµ¬ì¡°ë„**  
![admin](https://user-images.githubusercontent.com/61307201/124128622-ed4c4100-dab7-11eb-8434-6027fa55c207.JPG)


## í™”ë©´êµ¬ì„±/ ê¸°ëŠ¥êµ¬í˜„âœ¨

### ë°˜ì‘í˜• ì›¹
> ì ‘ì†í•˜ëŠ” ë””ìŠ¤í”Œë ˆì´ ì ‘ì† ê¸°ê¸°ì˜ í™”ë©´ í¬ê¸°ë¥¼ ìë™ìœ¼ë¡œ ë³€í•˜ê²Œ ë°˜ì‘í˜•ìœ¼ë¡œ ì œì‘í•˜ì˜€ìŠµë‹ˆë‹¤.
* **í™”ë©´êµ¬ì„±**
![responsive](https://user-images.githubusercontent.com/86868936/124855590-1e5ed100-dfe4-11eb-87ad-443bd3f76900.gif)

------

### ë©”ì¸í™”ë©´ ğŸ–¼

**1. ë‚ ì”¨ì •ë³´:sunny:**  
> Geolocation API(í˜„ì¬ ìœ„ì¹˜ ì •ë³´)ì™€ OpenWeather API(ë‚ ì”¨ API)ë¥¼ ì‚¬ìš©í•´ í˜„ì¬ ë‚´ ìœ„ì¹˜ì˜ 3ì‹œê°„ë³„ ê¸°ì˜¨ ê·¸ë˜í”„ì™€ ë‚ ì”¨ ì•„ì´ì½˜ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ë‚ ì”¨ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
> 
  * **í™”ë©´êµ¬ì„±**  
  ![weather](https://user-images.githubusercontent.com/61307201/124220162-61c6c480-db38-11eb-899d-36f01acca1b3.JPG)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
  	+ navigator.geolocationë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ë¸Œë¼ìš°ì €ì¸ì§€ í™•ì¸ í›„ í˜„ì¬ ì •ë³´ë¥¼ ìš”ì²­í•´ ë°›ì•„ì˜¨ ê°’ì˜ ìœ„ë„ì™€ ê²½ë„ê°’ì„ ì €ì¥í•©ë‹ˆë‹¤.
	```java
	if(navigator.geolocation) { //ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€
		navigator.geolocation.getCurrentPosition(position => {//ìœ„ì¹˜ í—ˆìš© ì—¬ë¶€
			const lat = position.coords.latitude;	//ìœ„ë„
			const lon = position.coords.longitude;	//ê²½ë„
			getWeather(lat, lon);
		}, error => { //ìœ„ì¹˜ ì •ë³´ í—ˆìš© X= ê¸°ë³¸ê°’: ì„œìš¸
			getWeather(37.56826,126.977829);
		})
	} else { //ì‚¬ìš© ë¶ˆê°€ ë¸Œë¼ìš°ì €= ê¸°ë³¸ê°’: ì„œìš¸
		getWeather(37.56826,126.977829);
	}
	```
	
	+ ë°›ì•„ì˜¨ ìœ„ë„ ê²½ë„ ê°’ì„ RESTë¡œ ê°’ì„ ì£¼ê³  ë°›ì•„ ê¸°ì˜¨ ê·¸ë˜í”„ì™€ ë‚ ì”¨ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
	```java
	fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=`+lat+`&lon=`+lon
				    +`&appid=bafd431d2ed57c71b8ac678da1847fa3`)
		    .then(res => res.json())
		    .then(data => {
		    //í‘œì‹œí•  ì‹œê°„ëŒ€ ì„¤ì •, ë‚ ì”¨ ì•„ì´ì½˜ ì ìš© ìƒëµ
		    //ê·¸ë˜í”„ ìœ„ì¹˜ ê³„ì‚°
			for(var i=0;i<5;i++){
				chartData[i]=Math.ceil(Math.abs(chartData[i])*100)/100;
				if(chartData[i]<100){
					chartData[i]=Math.ceil((chartData[i]-30)*100)/100;
				}   		
			}
			//ê·¸ë˜í”„ì„ 
			var dUrl="M17,"+chartData[0]+" L102.5,"+chartData[1]+" L189,"+chartData[2]
					+" L275.5,"+chartData[3]+" L360.5,"+chartData[4];
			document.getElementById("weather_graph").setAttribute("d",dUrl);
			document.getElementById("weather_ul").innerHTML=str;
			//$("#weather_ul").append(str);

			//ê·¸ë˜í”„ ì  ìœ„ì¹˜
			var dotBottom=document.getElementsByClassName("weather_item");
			for(var i=0;i<dotBottom.length;i++){  
				dotBottom[i].style.top = (chartData[i]-15)+"px";    		
			}
		    })
	```
	
**2. ë©”ì¸ ë©”ë‰´/ ì»¤ë®¤ë‹ˆí‹° ë©”ë‰´/ ì¸ê¸° ê²Œì‹œíŒ**
> ë¶ˆí•„ìš”í•œ ì´ë™ ê²½ë¡œë¥¼ ì¤„ì´ê¸° ìœ„í•´ ì œê³µë˜ëŠ” ì„œë¹„ìŠ¤ë¡œ ì»¤ë®¤ë‹ˆí‹° ë©”ë‰´ì™€ ì¸ê¸° ê²Œì‹œíŒì€ DBì—°ê²°ì„ í†µí•´ ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
> 
  * **í™”ë©´êµ¬ì„±**  
  ![image](https://user-images.githubusercontent.com/86868936/124854670-a7750880-dfe2-11eb-91d2-1156aa9ba285.png)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
  	* HomeController: ì»¤ë®¤ë‹ˆí‹° ë©”ë‰´ì™€ ì¸ê¸°ê²Œì‹œë¬¼ì„ modelì— ë‹´ì•„ ì¶œë ¥í•©ë‹ˆë‹¤.
	```java
	 @RequestMapping(value = "/", method = RequestMethod.GET)
		public String home(SearchCriteria cri,Model model,Principal principal){
			logger.info("ë©”ì¸ í˜ì´ì§€");	
			try {
				//ì»¤ë®¤ë‹ˆí‹° ë©”ë‰´(ì¼ìƒ,ë·°í‹° ë“±)
				model.addAttribute("brdNameList",brdDAO.cmuBrdNameList());						
				//ì¸ê¸° ê²Œì‹œë¬¼ ì¶œë ¥
				model.addAttribute("list",service.mainHotList());						
			}catch(Exception e){
				System.out.println(e.getMessage());
			}
			return "home";
		}
	```

	* boardMapper.xml: ì»¤ë®¤ë‹ˆí‹° ë©”ë‰´, ì¸ê¸° ê²Œì‹œë¬¼ìˆ˜ ìµœëŒ€ 5ê°œë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
	```java
	//ë©”ì¸ ì»¤ë®¤ë‹ˆí‹° ë©”ë‰´
		<select id="brdNameListNon" resultType="hashmap">
			select * from board_list where brd_idx!=100
		</select>
	//ë©”ì¸ ì¸ê¸° ê²Œì‹œë¬¼ ìˆ˜(ìµœëŒ€ 5ê°œ)
		<!-- hot ê²Œì‹œíŒ ê²Œì‹œë¬¼ìˆ˜ -->
			<selelct id="mainHotList" resultType="hashmap">
			<![CDATA[select post_Idx,brd_Idx,post_title from(
				select  bp.*,(select count(*)from reply_20000 rp where bp.post_idx=rp.post_idx) reply_cnt 
				from board_post_20000 bp order by post_idx desc)
			where post_notice='N' and post_hit>=50 or reply_cnt>=50 and rownum <=5]]>
		</selelct>
	```
------	

### íšŒì›ê°€ì…ğŸ””
**1. ìœ íš¨ì„± ì²´í¬ ë° ì¤‘ë³µí™•ì¸**
> ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸, ë‹‰ë„¤ì„, ì´ë©”ì¼, ì „í™”ë²ˆí˜¸ì— ìœ íš¨ì„± ì¡°ê±´ì„ ì„¤ì •í•´ ì¡°ê±´ì— ë§ê²Œ ì…ë ¥ë˜ë©´ DB ë°ì´í„°ì™€ ë¹„êµí•´ ì¤‘ë³µ í™•ì¸ì„ í•©ë‹ˆë‹¤.
> 
  * **í™”ë©´ê¸°ëŠ¥**  
  ![join](https://user-images.githubusercontent.com/86868936/124596953-d46bd300-de9d-11eb-8a66-6233f70f4b95.gif)

  * **ê¸°ëŠ¥êµ¬í˜„**
  	+ member.js: ìœ íš¨ì„± ì¡°ê±´ì„ ë¹„êµí•˜ê³  ì¤‘ë³µí™•ì¸ ë¬¸êµ¬ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.	
	```java
	//ì•„ì´ë””
	var join_id = document.getElementById("join_id");
	var id_regul2 = /^[-_0-9a-zA-Z]([-_]?[0-9a-zA-Z-_]){4,10}$/;
	join_id.onkeyup= function(){
		if(!id_regul2.test(join_id.value)){
			 if((join_id.value)==''){
				 id_regul.innerHTML="í•„ìˆ˜ ì…ë ¥ì…ë‹ˆë‹¤.";
			 }else{
				 id_regul.innerHTML="5~10ìì˜ ì˜ë¬¸ ëŒ€ ì†Œë¬¸ì, ìˆ«ìì™€ íŠ¹ìˆ˜ê¸°í˜¸(_),(-)ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤."; 
			 }
			 id_regul.classList.remove('green');
		}else{
			$.ajax({
				url: "/member/id_check",
				type: "POST",
				data: {"userId":(join_id.value)},
				datatype:"json",
				success:function(data){
					if(data==0){
						id_regul.classList.add('green');
						id_regul.innerHTML="ì‚¬ìš© ê°€ëŠ¥í•œ IDì…ë‹ˆë‹¤.";
					}else{
						id_regul.innerHTML="ì´ë¯¸ ì‚¬ìš©ì¤‘ì´ê±°ë‚˜ íƒˆí‡´í•œ ì•„ì´ë””ì…ë‹ˆë‹¤.";
						id_regul.classList.remove('green');
					}
				},error : function(errThrown){
					console.log("err",errThrown);
				}
			})
		}
	}
	```	
	
	+ MemberController: ì…ë ¥í•œ ì•„ì´ë”” ê°’ì„ ë°›ì•„ ë¹„êµ í›„ ê°’ì„ ì¶œë ¥í•©ë‹ˆë‹¤.
	```java
	//ì•„ì´ë”” ì¤‘ë³µì²´í¬
	@PostMapping("/id_check")
	public @ResponseBody int idCheck(String userId) throws Exception{
		logger.info("ì•„ì´ë”” ì¤‘ë³µ ì²´í¬");
		int idCheck=0;
		try {
			idCheck=service.idCheck(userId);
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}
		return idCheck;
	}
	```
	
	+ memberMapper.xml: ì…ë ¥í•œ ì•„ì´ë”” ê°’ì´ ìˆìœ¼ë©´ 1, ì—†ìœ¼ë©´ 0ì„ ì¶œë ¥í•©ë‹ˆë‹¤.
	```java
	<!-- ì•„ì´ë”” ì¤‘ë³µì²´í¬ -->
	<select id="idCheck" resultType="int">
		select count(*) from member_info where mem_id=#{userId}
	</select>
	}
	```

**3. ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ** ğŸ“§
> ì¸ì¦ì½”ë“œ ìƒì„±í›„ ì…ë ¥í•œ ì´ë©”ì¼ë¡œ ì¸ì¦ì½”ë“œë¥¼ ì „ì†¡í•´ ì¸ì¦ í™•ì¸í•©ë‹ˆë‹¤.

  * **í™”ë©´ê¸°ëŠ¥**  
  ![email](https://user-images.githubusercontent.com/86868936/124597010-e64d7600-de9d-11eb-8d06-8a7a18b78233.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
 	 * MemberService: ì½”ë“œìƒì„± í›„ ì´ë©”ì¼ì„ ì „ì†¡í•©ë‹ˆë‹¤.
	```java
	//ì´ë©”ì¼ì½”ë“œìƒì„±
	@Override
	public String creatCode() {
		Random  ran = new Random();
		StringBuffer sb = new StringBuffer();
		do {
			int num = ran.nextInt(75)+48;
			if((num>=48 && num<=57) || (num>=65 && num<=90) || (num>=97 && num<=122)) {
				sb.append((char)num);
			}else if(num>=47){sb.append((int)num);
			}else {continue;}
		} while (sb.length() < 7);
		return sb.toString();
	}
	//íšŒì›ê°€ì… ì´ë©”ì¼ì „ì†¡
	@Transactional
	@Override
	public void sendEmailCode(String code,String userEmail) {
		try {
			MailHandler mailHandler = new MailHandler(MailServiceImpl);
			//ë°›ëŠ” ì‚¬ëŒ
			mailHandler.setTo(userEmail);
			//ë³´ë‚´ëŠ” ì‚¬ëŒ
			mailHandler.setFrom("BoardBell");
			//ì œëª©
			mailHandler.setSubject("[BoardBell] íšŒì›ê°€ì… ì¸ì¦ì½”ë“œ ì…ë‹ˆë‹¤.");
			//ë‚´ìš©
			mailHandler.setText(
				new StringBuffer().append("<p>..ìƒëµ..<span style=\"font-size: 18pt;\"> ì¸ì¦ë²ˆí˜¸ :&nbsp;"
						+ "<b>"+code+"</b></span></p>").toString());
			mailHandler.send();
		}catch(Exception e) {
			e.printStackTrace();
		}		
	}
	```
	 * root-context.xml: localhostë¡œ ì‹¤í–‰í•  ë• êµ¬ê¸€ ì•„ì´ë””/ ë¹„ë°€ë²ˆí˜¸ë¡œ ì´ë©”ì¼ ì „ì†¡ì´ ê°€ëŠ¥í•˜ì§€ë§Œ aws ì„œë¹„ìŠ¤ì‹œ ë³´ì•ˆ ë¬¸ì œë¡œ ë©”ì¼ ì „ì†¡ì´ ì•ˆë˜ë¯€ë¡œ ê³„ì •  
	 ```2ì°¨ ì¸ì¦ì„ í•œ í›„ 2ì°¨ ë¹„ë°€ë²ˆí˜¸```ë¥¼ ì ì–´ì•¼ í•©ë‹ˆë‹¤.
	 
	 ```java
	 <!-- ë©”ì¼ ë³´ë‚´ê¸° (SEND) -->
	   <bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
	      <property name="port" value="465" />
	      <property name="username" value="EMAIL_ADDRESS" /> <!-- êµ¬ê¸€ ì•„ì´ë”” -->
	      <property name="password" value="EMAIL_PASSWORD" /> <!-- êµ¬ê¸€ 2ì°¨ ë¹„ë°€ë²ˆí˜¸ -->
		  <property name="defaultEncoding" value="UTF-8" />
	      <!-- email ìš”ì²­ì‹œëŠ” SMTP, ë³´ì•ˆì—°ê²° SSL ì„¤ì •-->
	      <property name="javaMailProperties">
		 <props>
			<prop key="mail.smtp.host">smtp.gmail.com</prop>
			<prop key="mail.smtp.socketFactory.port">465</prop>
			<prop key="mail.smtp.auth">true</prop>
			<prop key="mail.smtp.starttls.enable">true</prop>
			<prop key="mail.smtp.debug">true</prop>
			<prop key="mail.smtps.ssl.trust">*</prop>           
			<prop key="mail.smtp.socketFactory.class">javax.net.ssl.SSLSocketFactory</prop>
			<prop key="mail.smtp.socketFactory.fallback">false</prop>
		 </props>
	      </property>
	   </bean>
	 ```
 
 
**4. íšŒì›ê°€ì… ì²˜ë¦¬**
> ì…ë ¥ëœ íšŒì› ì •ë³´ì¤‘ ë¹„ë°€ë²ˆí˜¸ëŠ” ì•”í˜¸í™” ì²˜ë¦¬ë¥¼ í•œ í›„ DBì— ì €ì¥í•´ íšŒì›ê°€ì…ì„ ì™„ë£Œí•©ë‹ˆë‹¤.
> 
  * **í™”ë©´ê¸°ëŠ¥**  
  ![join_result](https://user-images.githubusercontent.com/86868936/124597538-94f1b680-de9e-11eb-9df1-e0b9e1480e41.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
 	 * MemberController: form ì•ˆì— ì…ë ¥ëœ ì •ë³´ë¥¼ MemberVOë¡œ ë°›ì•„ì™€ ë“±ë¡ì— ì„±ê³µí•˜ë©´ 'success'ë¥¼ ì „ì†¡í•´ ê°€ì… ì¶•í•˜ ë©”ì„¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
   	```java
	/íšŒì›ê°€ì…POST
	@PostMapping(value="/join", produces = "text/html; charset=utf8")
	public String postJoin(MemberVO vo,RedirectAttributes rttr) throws Exception{
		logger.info("íšŒì›ê°€ì… ì²˜ë¦¬");
		int result=0;
		try {
			result=service.join(vo);
			if(result==1) {
				rttr.addFlashAttribute("joinMsg","success");
			}			
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}		
		return "redirect:/";
	}
	```  
 	 * MemberServiceImpl: ```BcryptPasswordEncoder```ë¡œ ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í•©ë‹ˆë‹¤.
	```java
	//íšŒì›ê°€ì…/ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
	@Override
	public int join(MemberVO vo) throws Exception {
		String endcodedPassword = bcryptPasswordEncoder.encode(vo.getUserPw());
		vo.setUserPw(endcodedPassword);	
		return memberDAO.join(vo);
	}
	```  
	
 	 * memberMapper.xml: DBì— MemberVO ê°’ì„ ë“±ë¡í•©ë‹ˆë‹¤.(#{}='ê°’'/ ${}=ê°’, jdbcType=VARCHAR: íŒŒë¼ë¯¸í„°ê°’ì´ nullì¸ê±¸ í—ˆìš©í•¨)
   	```java
	<!-- íšŒì›ê°€ì… -->
	<insert id="join" parameterType="MemberVO">
		insert into  member_info (mem_id,mem_pw,mem_nickname,mem_phoneNum,mem_postcode,mem_roadAddr,mem_detailAddr,mem_email,
		mem_regdate,mem_role)
		values (#{userId},#{userPw},#{userNickName},#{phoneNum,jdbcType=VARCHAR},#{postCode,jdbcType=VARCHAR},
		#{roadAddr,jdbcType=VARCHAR}, #{detailAddr,jdbcType=VARCHAR},#{email},sysdate,'ROLE_MEMBER')
	</insert>
	``` 
------	
### ë¡œê·¸ì¸/ ë¡œê·¸ì•„ì›ƒ/ ê³„ì •ì°¾ê¸° ğŸ™‹â€â™€ï¸ğŸ™‹â€â™‚ï¸
> Securityë¥¼ ì´ìš©í•˜ì—¬ ë¡œê·¸ì¸, ìë™ ë¡œê·¸ì¸ì„ êµ¬í˜„í–ˆìœ¼ë©° ê³„ì •ì´ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ í‹€ë¦¬ë©´ ì•ˆë‚´ ë¬¸êµ¬ê°€ ìƒì„±ë˜ë©°
> 
**1. Securityë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸/ ë¡œê·¸ì•„ì›ƒ/ ìë™ë¡œê·¸ì¸**
  * **í™”ë©´êµ¬í˜„**  
  ![login_out](https://user-images.githubusercontent.com/86868936/124614636-67f9cf80-deaf-11eb-925e-6ed4501cf797.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
	*  MemberController: ë¡œê·¸ì¸ í˜ì´ì§€ ì ‘ì†ì‹œ ì´ì „ ì ‘ì† ê²½ë¡œ ë‹´ì€ ì„¸ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤. 
	```java
	@GetMapping(value="/login")
	public void getLogin(HttpServletRequest request) throws Exception{
		logger.info("ë¡œê·¸ì¸ í˜ì´ì§€");
		try {
			String referrer = request.getHeader("Referer");
			if(!referrer.contains("/member/")){ //ì´ì „ ê²½ë¡œì— /member/ê°€ ì—†ìœ¼ë©´ ì €ì¥
				request.getSession().setAttribute("prevPage", referrer); 
			}
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}	
	}
	```
	
  	* login.jsp: `ìë™ë¡œê·¸ì¸` ì‚¬ìš©í•  ë•Œ í† í° ê°’ì„ ê°™ì´ ì „ì†¡í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— form ì „ì†¡ ì£¼ì†Œ ê°’ì— í† í°ê°’ì„ ì¶”ê°€í•´ì„œ í•©ë‹ˆë‹¤.
  	```java
	<form name="loginForm" method="post" action="/member/login-processing?${_csrf.parameterName}=${_csrf.token}" 
			onsubmit="login(document.loginForm); return false;" >
	```
	
   	* security-context.xml: ë°›ì•„ì˜¬ íŒŒë¼ë¯¸í„° nameëª…ê³¼ ë¡œê·¸ì¸ ì¸ì¦, ì„±ê³µ, ì‹¤íŒ¨, ë¡œê·¸ì•„ì›ƒ ê²½ë¡œ ë“±ì„ ì„¤ì •í•©ë‹ˆë‹¤.
	```java
	<!-- ë¡œê·¸ì¸:  ë¡œê·¸ì¸ ì¸ì¦, ì„±ê³µ, ì‹¤íŒ¨ ì²˜ë¦¬ ì‘ì—…-->
		<security:form-login 
			login-page="/member/login"
			username-parameter="userId" password-parameter="userPw"
			login-processing-url="/member/login-processing"
			authentication-failure-handler-ref="userLoginFailHandler"
			authentication-success-handler-ref="userLoginSuccessHandler"
			always-use-default-target="true" />
	<!-- ë¡œê·¸ì•„ì›ƒ: ë¡œê·¸ì•„ì›ƒ ì„±ê³µ, ì¿ í‚¤ ì‚­ì œ ì‘ì—…-->
 		<security:logout logout-url="/member/logout"
			logout-success-url="/"
			invalidate-session="true"
			delete-cookies="remember-me,JSESSIONID" />
	<!-- ìë™ ë¡œê·¸ì¸: remember-me ì¿ í‚¤ ë¸Œë¼ìš°ì €ì— ì €ì¥, persistent_logins DBì— ì €ì¥, ìœ íš¨ ê¸°ê°„: 7ì¼ -->
	<!-- ì‚¬ì´íŠ¸ ì¬ë°©ë¬¸ì‹œ ì„œë²„ê°€ ì¿ í‚¤ì— í•´ë‹¹ ì •ë³´ë¥¼ DBì—ì„œ ë¶ˆëŸ¬ì˜¤ë©´ì„œ ì¸ì¦ ìœ ì§€ -->
		<security:remember-me remember-me-parameter="remember-me"  remember-me-cookie="remember-me" data-source-ref="dataSource" 
   			 authentication-success-handler-ref="userLoginSuccessHandler"  token-validity-seconds="604800" />
	``` 
	
  	 * UserLoginAuthProvider: ë¡œê·¸ì¸ ì •ë³´ì™€ DB ì •ë³´ë¥¼ ë¹„êµí•©ë‹ˆë‹¤.
	```java
	@Override
	public Authentication authenticate(Authentication authentication) throws AuthenticationException {
		/* ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì •ë³´ */
		String userId = authentication.getName();
		String userPw = (String) authentication.getCredentials();

		/* DBì—ì„œ ê°€ì ¸ì˜¨ ì •ë³´ */
		UserDetailsVO userDetails=new UserDetailsVO();
		try { userDetails = (UserDetailsVO)memberDao.getUserInfo(userId);
		} catch (Exception e) { e.printStackTrace(); }
		/* ì¸ì¦ ì§„í–‰ */	
		if(userDetails==null ) { //ê³„ì •ì´ ì—†ì„ë•Œ
			throw new UsernameNotFoundException(userId);
		}else if (!userId.equals(userDetails.getUsername()) //id ë˜ëŠ” pwê°€ ë‹¤ë¥¼ê²½ìš°
				|| !pwEncoding.matches(userPw, userDetails.getPassword()) ) {
			throw new BadCredentialsException(userId);		
		} else if (!userDetails.isEnabled()|| userDetails.getRole().equals("ROLE_STOP")) {
			throw new DisabledException(userId); //ë¹„í™œì„±í™”ëœ ê³„ì •ì¼ ê²½ìš°
		}
		//ìƒëµ..
		// ë‹¤ ì¼ìœ¼ë©´ íŒ¨ìŠ¤ì›Œë“œ ì •ë³´ëŠ” ì§€ì›Œì¤Œ (ê°ì²´ë¥¼ ê³„ì† ì‚¬ìš©í•´ì•¼ í•˜ë¯€ë¡œ)
		userDetails.setUserPw(null);			
		/* ìµœì¢… ë¦¬í„´ ì‹œí‚¬ ìƒˆë¡œë§Œë“  Authentication ê°ì²´ */
		Authentication newAuth = new UsernamePasswordAuthenticationToken(
				userDetails, null, userDetails.getAuthorities());
		return newAuth;
	}
	``` 
	
	* CustomUserDetailsService: DBì—ì„œ ìœ ì € ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
	```java
	@Override
	public UserDetails loadUserByUsername(String userId) throws UsernameNotFoundException{
		//ìµœì¢…ë¦¬í„´í• ê°ì²´
		UserDetailsVO userVO=new UserDetailsVO();
		//ì‚¬ìš©ìì •ë³´
		MemberVO mem =new MemberVO();				
		try { mem=memberDAO.getUserInfoDetail(userId);
		} catch (Exception e) { e.printStackTrace(); }
		//ì‹œíë¦¬í‹° ì‚¬ìš©ì ì¸ì¦
		if(mem==null) {
			System.out.println("ê³„ì •ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
			return null;
		}else {
			userVO.setUserId(mem.getUserId());
			userVO.setUserNickName(mem.getUserNickName());
			userVO.setLink(mem.getLink());
		}	
		return userVO;
	```
	
	* UserLoginSuccessHandler: ë¡œê·¸ì¸ ì„±ê³µì‹œ ì´ì „ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
	```java
	@Override
	public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,
			Authentication authentication) throws ServletException, IOException {
		HttpSession session = request.getSession();
		if (session != null) {
			//sessionì— ì €ì¥ëœ ì´ì „ê²½ë¡œë¥¼ String ë³€ìˆ˜ë¡œ ì €ì¥
			String redirectUrl = (String) session.getAttribute("prevPage");				
			session.removeAttribute("prevPage");	//sessionì— ìˆëŠ” ì´ì „ê²½ë¡œ ì‚­ì œ
			String link = (String) session.getAttribute("link");			
			if(link!=null) {
				session.removeAttribute("link");
				response.setContentType("text/html; charset=UTF-8");
				PrintWriter out=response.getWriter();
				out.println("<script>opener.location.reload();" + 
							"    opener.location.href=\""+redirectUrl+"\"; self.close();</script>");
				out.flush();
			}else {
				getRedirectStrategy().sendRedirect(request, response, redirectUrl);
			}
		} else {
			super.onAuthenticationSuccess(request, response, authentication);
		}
	}
	```
	
	* UserLoginFailHandler: ë¡œê·¸ì¸ ì‹¤íŒ¨ì‹œ ì‹¤íŒ¨ ì•ˆë‚´ ë¬¸êµ¬ì™€ í•¨ê»˜ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
	```java
	@Override
	public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,
			AuthenticationException exception) throws IOException, ServletException {
		if (exception instanceof AuthenticationServiceException) {
			request.setAttribute("loginFailMsg", "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤.");		
		} else if(exception instanceof BadCredentialsException) {
			request.setAttribute("loginFailMsg", "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë¦½ë‹ˆë‹¤.");
			
		} //ìƒëµ..
		// ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
		request.getRequestDispatcher("/member/login").forward(request, response);		
	}
	```
	
	* UserDeniedHandler: ë¡œê·¸ì¸ í›„ ë’¤ë¡œê°€ê¸°ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ê°€ ì•„ë‹Œ ë©”ì¸í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
	```java
	@Override
	public void handle(HttpServletRequest request, HttpServletResponse response,
			AccessDeniedException ade) throws IOException, ServletException {
		request.setAttribute("errMsg",ade.getMessage());
		request.getRequestDispatcher("/").forward(request,response);				
	}
	```
	
	* UserDeniedHandler: ë¡œê·¸ì¸ í›„ ë’¤ë¡œê°€ê¸°ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ê°€ ì•„ë‹Œ ë©”ì¸í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
	```java
	@Override
	public void handle(HttpServletRequest request, HttpServletResponse response,
			AccessDeniedException ade) throws IOException, ServletException {
		request.setAttribute("errMsg",ade.getMessage());
		request.getRequestDispatcher("/").forward(request,response);				
	}
	```

**2. ì†Œì…œë¡œê·¸ì¸**
> ë„¤ì´ë²„, ì¹´ì¹´ì˜¤ ê³„ì •ì„ í†µí•´ 'BoardBell' í™ˆí˜ì´ì§€ ì´ìš©ì— í•„ìš”í•œ ì •ë³´ë¥¼ ë°›ì•„ì™€ ê°€ì… ë° ë¡œê·¸ì¸ ì¸ì¦ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
> 
  * **í™”ë©´êµ¬í˜„**  
  ![link_login](https://user-images.githubusercontent.com/86868936/124621327-25d38c80-deb5-11eb-98c7-ee34f0dfc6ec.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
	*  MemberController: ë„¤ì´ë²„ ë¡œê·¸ì¸ ì„±ê³µì‹œ ì¸ì¦ í† í°ì„ ê°€ì ¸ì™€ ê·¸ ê°’ìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ë°›ì•„ ê°€ì…ì—¬ë¶€ë¥¼ í™•ì¸í•œ í›„ ë¡œê·¸ì¸ì„ ì§„í–‰í•œë‹¤.
	```java
	@RequestMapping(value = "/naver_callback", method = { RequestMethod.GET, RequestMethod.POST })	
	public String callback(HttpServletRequest request,Model model, @RequestParam String code, 
			@RequestParam String state, HttpSession session,RedirectAttributes rttr) throws Exception {		
		String serverUrl = request.getScheme()+"://"+request.getServerName(); //í˜„ì¬í˜ì´ì§€ì£¼ì†Œê°’
		if(request.getServerPort() != 80) {
			serverUrl = serverUrl + ":" + request.getServerPort();
		}
		OAuth2AccessToken oauthToken=naverAuthBO.getAccessToken(session, code, state,serverUrl); //ì¸ì¦í† í°ê°’ ê°€ì ¸ì˜¤ê¸°
		if(oauthToken == null) {
			model.addAttribute("msg", "ë„¤ì´ë²„ ë¡œê·¸ì¸ access í† í° ë°œê¸‰ ì˜¤ë¥˜ ì…ë‹ˆë‹¤.");
			model.addAttribute("url", "/");
			return "/";
		}
		
		String apiResult = naverAuthBO.getUserProfile(oauthToken,serverUrl); //ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
		JSONParser jsonParser = new JSONParser();
		Object obj = jsonParser.parse(apiResult);
		JSONObject jsonObj = (JSONObject) obj;		
		JSONObject response_obj = (JSONObject) jsonObj.get("response");

		// í”„ë¡œí•„ ì¡°íšŒ
		String id = (String) response_obj.get("id");
		String email = (String)response_obj.get("email");
		String pw=id.substring(2,10);	
		int join=service.idCheck(id.substring(0,5)); //íšŒì›ê°€ì…ì—¬ë¶€
		if(join==0) { //íšŒì›ê°€ì…		
			Map<String,String> map=new HashMap<String,String>();
			map.put("userId",id.substring(0,5));
			map.put("userPw",pw);
			map.put("email",email);
			map.put("nick","nv_"+id.substring(0,5));
			map.put("link","naver");
			service.linkLogin(map);
		}
		session.setAttribute("link", "link");
		//ë¡œê·¸ì¸
		rttr.addFlashAttribute("id", id.substring(0,5));
		rttr.addFlashAttribute("pw", pw);
		return "redirect:/member/callback_login";
	}
	```
	
  	* NaverAuthBO: ë„¤ì•„ë¡œ ì¸ì¦ URL ìƒì„±, ì¸ì¦í† í° ê°€ì ¸ì˜¤ê¸°, ì‚¬ìš©ì ì •ë³´ 
  	```java
	//ë„¤ì•„ë¡œ ì¸ì¦ URL ìƒì„±
	public String getAuthorizationUrl(HttpSession session,String serverUrl) { 
		String state = generateRandomString(); //ì„¸ì…˜ ìœ íš¨ì„± ê²€ì¦ì„ ìœ„í•˜ì—¬ ë‚œìˆ˜ë¥¼ ìƒì„±
		setSession(session, state); //ìƒì„±í•œ ë‚œìˆ˜ ê°’ì„ sessionì— ì €ì¥
		//Scribeì—ì„œ ì œê³µí•˜ëŠ” ì¸ì¦ URL ìƒì„± ê¸°ëŠ¥ì„ ì´ìš©í•˜ì—¬ ë„¤ì•„ë¡œ ì¸ì¦ URL ìƒì„± 
		OAuth20Service oauthService = new ServiceBuilder()
				.apiKey(CLIENT_ID).apiSecret(CLIENT_SECRET) .callback(serverUrl+REDIRECT_URI)
				.state(state).build(NaverLoginApi.instance());  // ì•ì„œ ìƒì„±í•œ ë‚œìˆ˜ê°’ì„ ì¸ì¦ URLìƒì„±ì‹œ ì‚¬ìš©í•¨ 	
		return oauthService.getAuthorizationUrl(); 
	} 
	
	//ë„¤ì•„ë¡œ Callback ì²˜ë¦¬ ë° AccessToken íšë“
	public OAuth2AccessToken getAccessToken(HttpSession session,String code, String state,String serverUrl)throws IOException { 
		//Callbackìœ¼ë¡œ ì „ë‹¬ë°›ì€ ì„¸ì„ ê²€ì¦ìš© ë‚œìˆ˜ê°’ê³¼ ì„¸ì…˜ì— ì €ì¥ë˜ì–´ìˆëŠ” ê°’ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
		String sessionState = getSession(session); 
		if (StringUtils.equals(sessionState, state)) { 
			OAuth20Service oauthService = new ServiceBuilder()
					.apiKey(CLIENT_ID).apiSecret(CLIENT_SECRET) 
					.callback(serverUrl+REDIRECT_URI).state(state).build(NaverLoginApi.instance()); 
			//Scribeì—ì„œ ì œê³µí•˜ëŠ” AccessToken íšë“ ê¸°ëŠ¥ìœ¼ë¡œ ë„¤ì•„ë¡œ Access Tokenì„ íšë“
			OAuth2AccessToken accessToken = oauthService.getAccessToken(code); 
			return accessToken; 			
		}
		return null;
	} 
	//Access Tokenì„ ì´ìš©í•˜ì—¬ ë„¤ì´ë²„ ì‚¬ìš©ì í”„ë¡œí•„ APIë¥¼ í˜¸ì¶œ
	public String getUserProfile(OAuth2AccessToken oauthToken, String serverUrl) throws IOException { 
		OAuth20Service oauthService = new ServiceBuilder()
				.apiKey(CLIENT_ID).apiSecret(CLIENT_SECRET) 
				.callback(serverUrl+REDIRECT_URI).build(NaverLoginApi.instance()); 
		OAuthRequest request = new OAuthRequest(Verb.GET, PROFILE_API_URL, oauthService);;
		oauthService.signRequest(oauthToken, request); 
		Response response = request.send();
		return response.getBody(); 
	}
	```


**3. ì•„ì´ë”” ì°¾ê¸°/ ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°**
> **ì•„ì´ë”” ì°¾ê¸°:** ê°€ì…í•œ ì´ë©”ì¼ì„ ì…ë ¥í•´ í•´ë‹¹ ê³„ì •ì˜ ì•„ì´ë””ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.  
> **ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°:** ê°€ì…í•œ ì•„ì´ë””ì™€ ì´ë©”ì¼ ì…ë ¥ í›„ ê°€ì…í•œ ì´ë©”ì¼ë¡œ ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤. ì½”ë“œ ì „ì†¡ í›„ ì½”ë“œë¥¼ ì•”í˜¸í™”í•´ í•´ë‹¹ íšŒì›ì˜ ë¹„ë°€ë²ˆí˜¸ DBë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.  
  * **í™”ë©´êµ¬í˜„**  
  ![find_id_pw](https://user-images.githubusercontent.com/86868936/124618869-1f441580-deb3-11eb-826f-03db47077f14.gif)

  * **ê¸°ëŠ¥êµ¬í˜„**
  	* MemberController: ì´ë©”ì¼ ë˜ëŠ” ì´ë©”ì¼, ì•„ì´ë”” ê°’ì„ ë°›ì•„ ë¹„êµ í›„ ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™ ì‹œ ì•„ì´ë”” ì¶œë ¥ ë˜ëŠ” ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ì „ì†¡í•©ë‹ˆë‹¤.
	```java
	@PostMapping("/find_id_pw")
	public @ResponseBody int findId(MemberVO vo) throws Exception{
		logger.info("ì•„ì´ë”” / ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°ë¥¼ ìœ„í•œ ì •ë³´ ë¹„êµ ì²˜ë¦¬");
		int findId=0;
		try { findId=service.findIdPw(vo);
		}catch(Exception e) { System.out.println(e.getMessage());}	
		return findId;
	}
	@PostMapping("/resultIdPw")
	public void resultIdPage(MemberVO vo,Model model) throws Exception{
		logger.info("idê°’ ì¶œë ¥ ë° ì„ì‹œë¹„ë°€ë²ˆí˜¸ ë°œê¸‰");
		try {
			if(vo.getUserId()==null) {
				model.addAttribute("idText",service.resultId(vo));
				model.addAttribute("result","id");
			}else {
				//ì„ì‹œë¹„ë°€ë²ˆí˜¸ ìƒì„±
				String code=service.creatCode();
				//ì½”ë“œì „ì†¡
				service.sendEmailPw(code,vo.getEmail());
				model.addAttribute("result","pw");	
			}
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}			
	}
	```
	
	* MemberMapper.xml: ì…ë ¥í•œ ì•„ì´ë””ì™€ ì´ë©”ì¼ì´ ì¼ì¹˜í•œ íšŒì›ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„ì‹œ ë°œê¸‰í•œ ë¹„ë°€ë²ˆí˜¸(ì•”í˜¸í™” ë¨)ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
	```java
	<!-- ë¹„ë°€ë²ˆí˜¸ -> ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½ -->
	<update id="changePw" parameterType="map">
		update member_info set mem_pw=#{pw} where mem_email=#{email}
	</update>
	```
-----
      
### ê³µì§€ ğŸ“¢
**1. ì‚¬ìš©ìë³„ ê¶Œí•œ**  
   |ì‚¬ìš©ì|ê¸€ ì½ê¸°|ê¸€ ì“°ê¸°|ê¸€ ìˆ˜ì •|ê¸€ ì‚­ì œ|
   |:----:|:----:|:-----:|:-----:|:-----:|
   |ë¹„íšŒì›|O|X|X|X|
   |íšŒì›|O|X|X|X|
   |ê´€ë¦¬ì|O|O|O|O|

**2. ê¸€ì“°ê¸°** âœ’
> **ì „ì²´ê³µì§€:** ì „ì²´ ê³µì§€ ì²´í¬ í›„ ê¸€ ì‘ì„± ì™„ë£Œí•˜ë©´ ê³µì§€ ë° ì»¤ë®¤ë‹ˆí‹° í˜ì´ì§€ ì „ì²´ì— ê³µì§€ê°€ ë“±ë¡ë©ë‹ˆë‹¤.  
> **ê³µì§€ê¸€:** ê³µì§€ ê²Œì‹œíŒì˜ ê³µì§€ê¸€ë¡œ ë“±ë¡ë©ë‹ˆë‹¤.
  * **í™”ë©´êµ¬í˜„**  
   ![image](https://user-images.githubusercontent.com/86868936/124716389-008b6080-df3f-11eb-9919-b89dcabfe80d.png)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
  	* BrdController: ì ‘ì†í•œ ìœ ì €ì˜ ì•„ì´ë””ì™€ ë‹‰ë„¤ì„ì„ ê°€ì ¸ì™€ ì‘ì„±ëœ ê¸€ì„ ë“±ë¡í•©ë‹ˆë‹¤. ì „ì²´ê³µì§€ ë˜ëŠ” ê³µì§€ê¸€ ì²´í¬ ì•ˆí• ì‹œ 'N'ê°’ì„ ë„£ì–´ ì¼ë°˜ ê¸€ í‘œì‹œë¥¼ í•©ë‹ˆë‹¤. 
		```java
		//ê¸€ì“°ê¸° ë“±ë¡
		@RequestMapping(value="/register",method=RequestMethod.POST)
		public String insertPOST(@ModelAttribute("vo")BrdVO vo, Model model) throws Exception{
			String str="redirect:/cmu/brd";
			try {
				//ìœ ì € ID,ë‹‰ë„¤ì„
				UserDetailsVO principal = (UserDetailsVO) SecurityContextHolder
						.getContext().getAuthentication().getPrincipal();
				vo.setMemId(principal.getUserId());
				vo.setMemNickName(principal.getUserNickName());
				//ê³µì§€ê¸€ ì²´í¬ ì—†ì„ì‹œ
				if(vo.getNotice()==null) {vo.setNotice("N");}			
				service.regist(vo);	//ë“±ë¡
				model.addAttribute("mid",vo.getBrdId());
			if(vo.getNav().equals(10000)) {
					str= "redirect:/notice";
				}
			}catch(Exception e) {
				System.out.println(e.getMessage());
			}
			return str;
		}
		```
	
	* boardMapper.xml
	 	* ê³µì§€ í˜ì´ì§€ëŠ” ë‹µê¸€ê¸°ëŠ¥ì´ ì—†ì–´ group(ê²Œì‹œë¬¼ë²ˆí˜¸)ê°’ì„ ë„£ì§€ ì•ŠìŠµë‹ˆë‹¤.
	 		(selectkeyì— ëŒ€í•œ ì„¤ëª…ì€ ì•„ë˜ ê¸€ì“°ê¸°ì— ì í˜€ìˆìŒ)
	 	* ê³µì§€ê¸€ ì—¬ë¶€ ì»¬ëŸ¼ post_notice: 'T'=ì „ì²´ê³µì§€, 'Y'=ê²Œì‹œíŒê³µì§€, 'N'= ì¼ë°˜ê¸€ 
		```java
		<!-- register : ê¸€ì“°ê¸° (ê³µì§€,ì»¤ë®¤ë‹ˆí‹°)-->
		<insert id="createCmuPage" parameterType="BrdVO">
			<selectKey resultType="Integer" keyProperty="postId" order="AFTER">
				select board_post_${nav}_seq.currval as postId from dual
			</selectKey>
			insert into board_post_${nav} 
			(post_idx,brd_idx,cate_idx,post_title,post_content,mem_id,mem_nickname,post_notice)
			values (board_post_${nav}_seq.nextval,#{brdId},#{cateId,jdbcType=VARCHAR},
			#{title},#{content},#{memId},#{memNickName},#{notice})
		</insert>
		```
---
	
### ì»¤ë®¤ë‹ˆí‹° ğŸ‘­
**1. ì‚¬ìš©ìë³„ ê¶Œí•œ**  
|ì‚¬ìš©ì|ê¸€ ì½ê¸°|ê¸€ ì“°ê¸°|ê³µì§€ê¸€ ì“°ê¸°|ê¸€ ìˆ˜ì •|ê¸€ ì‚­ì œ|
|:----:|:----:|:----:|:----:|:----:|:----:|
|ë¹„íšŒì›|O|X|X|X|X|
|íšŒì›|O|O|X|O|O|
|ê´€ë¦¬ì|O|O|O|O|O|
 
**2. ì „ì²´/ ì¸ê¸°ê¸€** 
> ê° ê²Œì‹œë¬¼ì˜ ê²Œì‹œíŒëª… í‘œì‹œí•©ë‹ˆë‹¤. ê³µì§€ ë¦¬ìŠ¤íŠ¸ëŠ” ì „ì²´ ê³µì§€ ëª©ë¡ë§Œ ë³´ì—¬ì¤ë‹ˆë‹¤.(ìµœëŒ€ 5ê°œ)   
> ì „ì²´ëŠ” ì»¤ë®¤ë‹ˆí‹°ì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  ê¸€ì„ ë³´ì—¬ì£¼ê³ , ì¸ê¸°ê¸€ì€ ì¡°íšŒìˆ˜ 50 ì´ìƒ ë˜ëŠ” ëŒ“ê¸€ 50ê°œ ì´ìƒì¸ ê¸€ë§Œ í‘œì‹œë©ë‹ˆë‹¤.
  * **í™”ë©´êµ¬í˜„**  
  ![image](https://user-images.githubusercontent.com/86868936/124714771-27489780-df3d-11eb-9252-3a5e456894d7.png)
	
  * **ê¸°ëŠ¥êµ¬í˜„** 
	* BrdController: ì„ íƒí•œ í™ˆí˜ì´ì§€ ë©”ë‰´ ì´ë¦„,ë§í¬(ê³µì§€,ì»¤ë®¤ë‹ˆí‹°),ê²Œì‹œíŒ ë©”ë‰´(ì¼ìƒ,ì—°ì˜ˆ ë“±), ê²Œì‹œíŒ ì´ë¦„,ì „ì²´ ë° ê³µì§€ì‚¬í•­ ë¦¬ìŠ¤íŠ¸, í˜ì´ì§€ ìˆ˜, ê²Œì‹œë¬¼ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
	```java
	@RequestMapping(value = "/brdnormal", method=RequestMethod.GET)
	public void tabCla(@ModelAttribute("nav")String nav,@ModelAttribute("cla")String cla,
			String mid,String post,SearchCriteria cri, Model model) throws Exception {
		logger.info("ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ ë¦¬ìŠ¤íŠ¸");
		try {
			//ì„ íƒí•œ í™ˆí”¼ ë©”ë‰´ ì´ë¦„ ,ë§í¬(ì»¤ë®¤ë‹ˆí‹° ë“±)
			model.addAttribute("tabMenu",service.tabMenuName(nav));
			//ì„ íƒí•œ í™ˆí”¼ ë©”ë‰´ì— ê²Œì‹œíŒ ë©”ë‰´(ì „ì²´,ì¼ìƒ,ë·°í‹° ë“±)
			model.addAttribute("brdMenuList",service.brdMenuList(nav));
			model.addAttribute("brdNameList",service.brdNameList(nav));	
			//ê²Œì‹œíŒ ì´ë¦„
			model.addAttribute("brdMenuName",service.brdMenuName(cla));
			//ì „ì²´ ê³µì§€ì‚¬í•­  ë¦¬ìŠ¤íŠ¸ ì¶œë ¥
			model.addAttribute("noticeT",service.noticeList(nav));
			
			Map<String, Object> map = new HashMap<String, Object>();
			map.put("nav", nav);	
			map.put("cla", cla);	
			map.put("searchType", cri.getSearchType());
			map.put("cri", cri);
			
			//í˜ì´ì§€ë°ì´í„°
			PageMaker pageMk=new PageMaker();
			pageMk.setCri(cri);			
			pageMk.setTotalCount(service.listPageCnt(map));
			model.addAttribute("pageMk", pageMk);
			
			//ê²Œì‹œíŒ ë¦¬ìŠ¤íŠ¸ ì¶œë ¥
			model.addAttribute("list",service.listPageCri(map));
			model.addAttribute("cri",cri);
			model.addAttribute("searchType",cri.getSearchType());
			//ê²Œì‹œë¬¼ ë‚´ìš©
			if(mid!=null && post!=null) {
				logger.info("ê²Œì‹œë¬¼ ë³´ê¸° í˜ì´ì§€");
				Map<String,Object> PageMap =new HashMap<String,Object>();
				PageMap.put("nav",nav);
				PageMap.put("cla",cla);
				PageMap.put("mid",mid);
				PageMap.put("postId",post);
				model.addAttribute(service.read(PageMap,1));
			}
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}
	}
	```
  * boardMapper.xml
  	* ì „ì²´ê³µì§€ëª©ë¡: ê³µì§€í…Œì´ë¸”(board_post_10000)ì— ê³µì§€ì—¬ë¶€(post_notice) ì»¬ëŸ¼ ê°’ì´ 'T'ì¸ ê²Œì‹œë¬¼ì„ ê°€ì ¸ì˜¨ë‹¤.
	* ì¸ê¸°ê¸€: ```post_hit>=50 or reply_cnt>=50``` ì¡°ê±´ìœ¼ë¡œ ì¸ê¸°ê¸€ ëª©ë¡ì„ ì¶œë ¥í•©ë‹ˆë‹¤.
	
	```java
	<!-- ê³µì§€ì‚¬í•­ : ì „ì²´ê³µì§€ -->
	<select id="noticeListTotal" resultType="BrdVO" resultMap="boardMap">
		<![CDATA[select b.*,(select count(*) from board_attach_10000 ba where ba.post_idx(+)=b.post_idx)as fileY 
		from board_post_10000 b where post_notice='T' and rownum<=5 order by post_idx desc]]>
	</select>
	<!-- ê²Œì‹œíŒ : hot -->
	<select id="cmuHotSearch" resultType="BrdVO" resultMap="boardMap" parameterType="hashmap">
	<![CDATA[select ìƒëµ from( ìƒëµ ) a
       	 	where rownum <= #{cri.page} * #{cri.pageLen} and post_idx > 0 and post_hit>=50 or reply_cnt>=50) b , board_list c
       	 where rn > (#{cri.page} -1) * #{cri.pageLen} and b.brd_idx=c.brd_idx order by rn]]>
	</select>
	```
	
**3. ê²Œì‹œíŒ/ ì¹´í…Œê³ ë¦¬**
> ê²Œì‹œíŒ ì•ˆì— ì¹´í…Œê³ ë¦¬ë¡œ ì„¸ë¶„í™” ê°€ëŠ¥í•˜ë©° ê° ê¸€ì— ì¹´í…Œê³ ë¦¬ëª…ì„ í‘œì‹œí•©ë‹ˆë‹¤. ê° ê²Œì‹œíŒ ê³µì§€ê¸€ì„ ì¶œë ¥í•©ë‹ˆë‹¤. 
  * **í™”ë©´êµ¬í˜„**  
  ![image](https://user-images.githubusercontent.com/86868936/124714883-49421a00-df3d-11eb-851d-d10db99b63d5.png)

  * **ê¸°ëŠ¥êµ¬í˜„** 
  	* boardMapper.xml
   		*  ê²Œì‹œíŒë³„ ê³µì§€: ì»¤ë®¤ë‹ˆí‹° í…Œì´ë¸”(board_post_20000)ì— ê³µì§€ì—¬ë¶€(post_notice) ì»¬ëŸ¼ ê°’ì´ 'Y'ì¸ í•´ë‹¹ ê²Œì‹œíŒì˜ ê³µì§€ ê²Œì‹œë¬¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.  
   		*  ê²Œì‹œíŒ: `brd_idx=${mid}` ì„ íƒí•œ ê²Œì‹œíŒì— `b.cate_idx=d.cate_idx(+)` ì¡´ì¬í•˜ëŠ” ì¹´í…Œê³ ë¦¬ ì¤‘ ê²Œì‹œê¸€ì˜ ì¹´í…Œê³ ë¦¬ê°€ ì¼ì¹˜í•˜ëŠ” ê²Œì‹œë¬¼ê³¼ ì¹´í…Œê³ ë¦¬ê°€ ì—†ëŠ” ê²Œì‹œë¬¼ì´ ì¶œë ¥ë©ë‹ˆë‹¤.
   		*  ì¹´í…Œê³ ë¦¬: `cate_idx=${sub}` ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ì™€ `b.cate_idx=d.cate_idx` ë™ì¼í•œ ì¹´í…Œê³ ë¦¬ ê²Œì‹œë¬¼ì„ ì¶œë ¥í•©ë‹ˆë‹¤.  
	```java
	<!-- ê²Œì‹œíŒë³„ ê³µì§€ -->
	<select id="noticeListBoard" resultType="BrdVO" resultMap="boardMap">
		<![CDATA[select bp.*,bc.cate_name,(select count(*) from board_attach_20000 ba where ba.post_idx(+)=bp.post_idx)as fileY 
		from ( select *from board_post_${nav} where post_notice='Y' and brd_idx=#{mid} )bp, brd_category bc 
		where bp.cate_idx=bc.cate_idx(+) and rownum<=5 order by post_idx desc ]]>
	</select>
	<!-- ê²Œì‹œíŒ : ê²Œì‹œíŒ í´ë¦­-->
	<select id="cmuBoardSearch" resultType="BrdVO" resultMap="boardMap" parameterType="hashmap">
	<![CDATA[select ìƒëµ from(
			select a.* from(
				select rownum rn,p.* from( ìƒëµ ) p 
				where brd_idx=${mid}]]>
			<include refid="search" />
			<![CDATA[order by rn ASC ) a
       		 	where rownum <= #{cri.page} * #{cri.pageLen} and post_idx > 0  ) b,brd_category d 
       	 	where rn > (#{cri.page} -1) * #{cri.pageLen} and b.cate_idx=d.cate_idx(+) order by rn]]>
	</select>
	<!-- ê²Œì‹œíŒ : ì¹´í…Œê³ ë¦¬ í´ë¦­ -->
	<select id="cmuCateSearch" resultType="BrdVO" resultMap="boardMap" parameterType="hashmap">
	<![CDATA[select ìƒëµ from(
			select ROW_NUMBER() OVER(ORDER BY rn desc) as pno, a.* from(
				select rownum rn,p.* from( ìƒëµ ) p 
				where cate_idx=${sub}]]>
			<include refid="search" />
			<![CDATA[order by rn ASC ) a
        		where rownum <= #{cri.page} * #{cri.pageLen} and post_idx > 0  ) b ,brd_category d 
       		where rn > (#{cri.page} -1) * #{cri.pageLen} and b.cate_idx=d.cate_idx order by pno desc]]>
	</select>
	```
---

### ê²Œì‹œíŒ ë¦¬ìŠ¤íŠ¸ ê³µí†µ ê¸°ëŠ¥ ğŸ 
**1. ê³µì§€ ìˆ¨ê¸°ê¸°** ğŸ”ˆ
  * **í™”ë©´êµ¬í˜„**  
  ![notice_hidden](https://user-images.githubusercontent.com/86868936/124701970-7a651f00-df2a-11eb-8bdc-c5ba1157ee2c.gif)

  * **ê¸°ëŠ¥êµ¬í˜„**
 	 * board.js: ê³µì§€ ìˆ¨ê¸°ê¸° í´ë¦­ì‹œ í´ë˜ìŠ¤ëª…ì— 'blind' ì¡´ì¬ ì—¬ë¶€ í™•ì¸í•´ ì „ì²´ê³µì§€ì™€ ê²Œì‹œíŒ ê³µì§€ë¥¼ ë³´ì—¬ì£¼ê±°ë‚˜ ìˆ¨ê¹ë‹ˆë‹¤.
	      ```java
		 $("input:checkbox[id='notice_hidden']").click(function(){
			var noticeChk = document.getElementsByClassName("noticeChk");
			for(var i=0;i<noticeChk.length;i++){
				noticeChk[i].classList.toggle('blind');
			}
		})
	      ```

**2. ëª©ë¡ ê°œìˆ˜**
  * **í™”ë©´êµ¬í˜„**  
  ![pagelist](https://user-images.githubusercontent.com/86868936/124719003-a5a73880-df41-11eb-8a82-f18d629aa042.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
  	* brdcate.jsp: í•œ í˜ì´ì§€ ëª©ë¡ ê°œìˆ˜ ë³€ê²½ì— í•„ìš”í•œ ê°’ì„ ì£¼ì†Œë¡œ ì „ì†¡í•˜ê³ , UriComponents í´ë˜ìŠ¤ë¥¼ í†µí•´ ì›í•˜ëŠ” urlì„ ìƒì„±í•´ì„œ ë³´ì—¬ì¤„ ê²Œì‹œë¬¼ ìˆ˜ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(ê¸°ë³¸ ì„¤ì •: 10ê°œì”©)
	```java
	<c:when test="${empty sub}">
		<li onClick="location.href='${pageMk.makeQueryLen(mid,5)}'">5ê°œì”©</li>
		..ìƒëµ..
 	</c:when>
	//PageMaker: ë³´ì—¬ì¤„ ê²Œì‹œë¬¼ìˆ˜(ê²Œì‹œíŒ)
	public String makeQueryLen(int mid,int pageLen) {
		UriComponents uriCom = UriComponentsBuilder.newInstance()
				.queryParam("mid", mid)
				.queryParam("page", 1)
				.queryParam("pageLen", pageLen).build();
		return uriCom.toUriString();
	}
	```
	
**3. ê²Œì‹œë¬¼ ë²ˆí˜¸**
> ê¸€ ë²ˆí˜¸ëŠ” í•´ë‹¹ ê²Œì‹œíŒ/ ì¹´í…Œê³ ë¦¬ì˜ ì´ ê²Œì‹œë¬¼ ìˆ˜ì˜ ì—­ìˆœìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.
> 
  * **í™”ë©´êµ¬í˜„**  
  ![list_num](https://user-images.githubusercontent.com/86868936/124703002-6f12f300-df2c-11eb-9ec3-e27f644a5211.JPG)
	
  * **ê¸°ëŠ¥êµ¬í˜„**
  	* brdnormal.jsp, brdcate.jsp: `í˜„ì¬ í˜ì´ì§€ì˜ ì²« ë²ˆí˜¸(num)=ì´ê²Œì‹œë¬¼-((í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸-1) X í˜„ì¬ ëª©ë¡ ê°œìˆ˜))` ì¦‰, (179ê°œ,1page, 10ê°œì”©)=>179 ë¶€í„° ì‹œì‘, (179ê°œ,2page, 10ê°œì”©)=169 ë¶€í„° ì‹œì‘, ë¦¬ìŠ¤íŠ¸ í•˜ë‚˜ ì¶œë ¥ì‹œ ${num-1} ê°’ì„ -1ì”© í•´ì£¼ë©´ì„œ ì¶œë ¥í•œë‹¤.(179,178,176...)
	```java
		<c:set var="num" value="${pageMk.totalCount-((pageMk.cri.page-1)*pageMk.cri.pageLen) }" />
			..ìƒëµ..
		<c:set var="num" value="${num-1}" />
	```

**4. ê²Œì‹œë¬¼ ë‚ ì§œ, ì²¨ë¶€íŒŒì¼ ì—¬ë¶€, ëŒ“ê¸€ ìˆ˜, ë‹µê¸€ ì •ë ¬, í˜ì´ì§• ê¸°ëŠ¥**
  * **í™”ë©´êµ¬í˜„**
   	* **ê²Œì‹œë¬¼ ë‚ ì§œ, ì²¨ë¶€íŒŒì¼ ì—¬ë¶€, ëŒ“ê¸€ ìˆ˜, ë‹µê¸€ ì •ë ¬**  
  	![image](https://user-images.githubusercontent.com/86868936/124711661-50672900-df39-11eb-8e09-cfb0b64e7998.png)
	
	* **í˜ì´ì§•**
	![page](https://user-images.githubusercontent.com/86868936/124710697-15b0c100-df38-11eb-92b1-0b58a6ae2724.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
  	* **ê²Œì‹œë¬¼ ë‚ ì§œ(board_regtime)**: `DECODE í•¨ìˆ˜`ë¥¼ ì‚¬ìš©í•´ ë“±ë¡ëœ ê¸€ì˜ ë‚ ì§œì™€ í˜„ì¬ ë‚ ì§œê°€ ê°™ìœ¼ë©´ `ì‹œê°„`ìœ¼ë¡œ í‘œì‹œ, ì•„ë‹ˆë©´ 'YYYY.MM.DD' `ë‚ ì§œ`ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
   				(ì²˜ìŒì— CASE WHENì„ ì‚¬ìš©í–ˆëŠ”ë° awsì—ì„  ì‘ë™ì„ ì•ˆí•´ í•¨ìˆ˜ë¥¼ ë°”ê¿ˆ)  	
 	 * **ì²¨ë¶€íŒŒì¼ ì—¬ë¶€(fileY)**: `fileY` ì»¬ëŸ¼ì„ ìƒì„±í•´ ê° ë¦¬ìŠ¤íŠ¸ì˜ íŒŒì¼ ìˆ˜ë¥¼ ê°€ì ¸ì™€ 1ê²Œ ì´ìƒì´ë©´ íŒŒì¼ì²¨ë¶€ ì•„ì´ì½˜ì´ í‘œì‹œë©ë‹ˆë‹¤.
  	* **ëŒ“ê¸€ ìˆ˜(reply_cnt)**: í˜„ì¬ ê²Œì‹œë¬¼ ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ” ëŒ“ê¸€ ìˆ˜ë¥¼ ê°€ì ¸ì™€ 1ê°œ ì´ìƒì´ë©´ ì œëª© ì˜†ì— ê°œìˆ˜ í‘œì‹œë¥¼ í•©ë‹ˆë‹¤.
  	* **ë‹µê¸€ ì •ë ¬**: `order by post_group DESC, post_step ASC,post_indent ASC`ìœ¼ë¡œ ë‹µê¸€ì„ ì •ë ¬í•©ë‹ˆë‹¤.(ë¶€ëª¨ê¸€ë²ˆí˜¸=group, ë‹µê¸€=step+1, ë‹µê¸€ì˜ ë‹µê¸€=indent+1) 
  	* **í˜ì´ì§•**: `rownum <= #{cri.page} * #{cri.pageLen} and post_idx > 0` í•´ë‹¹ í˜ì´ì§€ê¹Œì§€ì˜ ê²Œì‹œë¬¼ì„ ì„¤ì •í•˜ê³   
		`rn > (#{cri.page} -1) * #{cri.pageLen}` í•´ë‹¹ í˜ì´ì§€ì— ë³´ì—¬ì¤„ ê²Œì‹œë¬¼ìˆ˜ë¥¼ ì„¤ì •í•œë‹¤. ì¦‰, '3í˜ì´ì§€ 10ê°œì”©' ì´ë©´ rownumì»¬ëŸ¼ ìˆœìœ¼ë¡œ 30ê°œë¡œ ìë¥¸ ë‹¤ìŒ
		10ê°œì”© ì˜ë¼ ì„¸ë²ˆì§¸ ë¶€ë¶„ë¶€í„° ì¶œë ¥ëœë‹¤.		 
	```java
	<select id="cmuTotalSearch" resultType="BrdVO" resultMap="boardMap" parameterType="hashmap">
		 <![CDATA[select ìƒëµ, 
			DECODE(TO_CHAR(b.post_regtime,'YYYY.MM.DD'),TO_CHAR(sysdate,'YYYY.MM.DD'),TO_CHAR(b.post_regtime,'HH24:MI')
			,TO_CHAR(b.post_regtime,'YY.MM.DD')) board_regtime, 
	        	(select count(*) from board_attach_20000 ba where ba.post_idx=b.post_idx)as fileY 	        
			from(
				select a.* from(
					select  ROWNUM rn, p.* from( /*+INDEX_DESC(board_post_${nav})*/ 
						select bp.* ,(select count(*)from reply_20000 rp where bp.post_idx=rp.post_idx) reply_cnt 
						from board_post_${nav} bp where post_notice='N' 
					order by post_group DESC, post_step ASC,post_indent ASC) p where 1=1]]>
				<include refid="search" />
	       	 	<![CDATA[ order by rn ASC) a 
	        	where rownum <= #{cri.page} * #{cri.pageLen} and post_idx > 0) b , board_list c
	        where rn > (#{cri.page} -1) * #{cri.pageLen} and b.brd_idx=c.brd_idx order by rn]]>
     	</select>
	
	//PageMaker
	//í˜ì´ì§€ìˆ˜(ê²Œì‹œíŒ ê¸°ë³¸í˜•:ê²€ìƒ‰X)
	public String makeQuery(int page) {
		UriComponents uriCom = UriComponentsBuilder.newInstance()
				.queryParam("page", page)
				.queryParam("pageLen", cri.getPageLen()).build();
		return uriCom.toUriString();
	}
	```
**5. ê²€ìƒ‰** ğŸ§©
  * **í™”ë©´êµ¬í˜„**
  ![search](https://user-images.githubusercontent.com/86868936/124719062-b5bf1800-df41-11eb-86a3-815c5f5cbfae.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
  	* ë¦¬ìŠ¤íŠ¸ ì¶œë ¥ ì¿¼ë¦¬ ì•ˆì— `<include refid="search" />`ì„ ë„£ì–´ idê°€ 'search'ì¸ ì¿¼ë¦¬ë¥¼ ë„£ì–´ í•¨ê»˜ ì‹¤í–‰í•©ë‹ˆë‹¤.
 	* ê²€ìƒ‰íƒ€ì…(ì œëª©+ë‚´ìš©, ì œëª©, ê¸€ì‘ì„±ì)ì— ë§ê²Œ í•´ë‹¹ ê²Œì‹œíŒ ë‚´ì—ì„œ ê²€ìƒ‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
	```java
	<select> //ì¶œë ¥ì¿¼ë¦¬ë¬¸
		...
		<include refid="search" />
		...
	</select>
	<!-- ê²€ìƒ‰ íƒ€ì…ìœ¼ë¡œ ì¶”ê°€ -->
	<sql id="search">
		<if test="cri.searchType != null">
			<if test="cri.searchType == 'bcaN'.toString()"> and bca_id like '%'||#{cri.keyword}||'%' </if>
			<!-- ì œëª©+ë‚´ìš© -->
			<if test="cri.searchType == 'tc'.toString()"> and (post_title like '%'||#{cri.keyword}||'%' 
				or post_content like '%'||#{cri.keyword}||'%')</if>
			<!-- ì œëª© -->
			<if test="cri.searchType == 't'.toString()"> and post_title like '%'||#{cri.keyword}||'%' </if>
			<!-- ê¸€ì‘ì„±ì -->
			<if test="cri.searchType == 'w'.toString()"> and mem_nickname like '%'||#{cri.keyword}||'%' </if>
		</if>
	</sql>
	```
---

### ê¸€ì“°ê¸° âœ’
* **í™”ë©´êµ¬í˜„**
![write](https://user-images.githubusercontent.com/86868936/124726366-a55e6b80-df48-11eb-91f1-07d03849c8ee.gif)

* **ê¸°ëŠ¥êµ¬í˜„**
**1. ê²Œì‹œíŒ/ ì¹´í…Œê³ ë¦¬ ëª©ë¡**
>  ì „ì²´/ ì¸ê¸°ê¸€ì—ì„œ 'ê¸€ì“°ê¸°' ë²„íŠ¼ í´ë¦­ì‹œ ì»¤ë®¤ë‹ˆí‹°ì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  ê²Œì‹œíŒ ëª©ë¡ì„ ë³´ì—¬ì£¼ê³ , ì ‘ì†ëœ ê²Œì‹œíŒì—ì„œ 'ê¸€ì“°ê¸°' ë²„íŠ¼ í´ë¦­ì‹œ í•´ë‹¹ ê²Œì‹œíŒ ë©”ë‰´ì˜ ê²Œì‹œíŒ ëª©ë¡ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
> ê²Œì‹œíŒ ì„ íƒ ë³€ê²½ì‹œ ì¹´í…Œê³ ë¦¬ ëª©ë¡ì´ ë³€ê²½ë©ë‹ˆë‹¤.
  * brdController: ê¸€ì“°ê¸° í˜ì´ì§€ ì ‘ì†ì‹œ í•´ë‹¹ ê²Œì‹œíŒ ë©”ë‰´ì˜ ê²Œì‹œíŒ ëª©ë¡ê³¼ ì¹´í…Œê³ ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. ë‹¤ë¥¸ ê²Œì‹œíŒìœ¼ë¡œ ë³€ê²½ì‹œ ì¹´í…Œê³ ë¦¬ ëª©ë¡ë„ ë³€ê²½ë©ë‹ˆë‹¤.
	```java
	//ê¸€ì“°ê¸°í˜ì´ì§€ì¶œë ¥
	@RequestMapping(value="/register", method=RequestMethod.GET)
	public void registerGET(@ModelAttribute("nav")String nav, @ModelAttribute("mid")String mid,
			Model model,SearchCriteria cri) throws Exception{
		logger.info("ê¸€ì“°ê¸°í˜ì´ì§€");
		try {
			if(mid.equals("")) { //ì „ì²´,ì¸ê¸°ê¸€ì—ì„œ ê¸€ì“°ê¸°ì‹œ ì»¤ë®¤ë‹ˆí‹°ì˜ ê²Œì‹œíŒ ë¦¬ìŠ¤íŠ¸ ì „ì²´ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
				model.addAttribute("brd",service.cmuBrdNameList());
			}else {
				model.addAttribute("brd",service.brdNameListCla(mid));  //ì ‘ì†ëœ ê²Œì‹œíŒë¦¬ìŠ¤íŠ¸
				model.addAttribute("cate",service.cateNameListMid(mid));//ì ‘ì†ëœ ê²Œì‹œíŒì˜ ì¹´í…Œê³ ë¦¬ë¦¬ìŠ¤íŠ¸
			}		
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}
	}
	//ê²Œì‹œíŒ ì¹´í…Œê³ ë¦¬ ì¶œë ¥
	@RequestMapping(value="/catelist",method=RequestMethod.POST)	
	public @ResponseBody List<Map<String,Object>> brdNav(
			@ModelAttribute("mid")String mid, Model model) throws Exception{
		logger.info("ê²Œì‹œíŒ ë§ë¨¸ë¦¬ ì¶œë ¥");
		List<Map<String,Object>> cateN=  new ArrayList<Map<String, Object>>();
		try {
			cateN=service.cateNameListMid(mid); //ì¹´í…Œê³ ë¦¬ë¦¬ìŠ¤íŠ¸
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}	
		return cateN;
	}
	```
	
**2. ê¸€ì“°ê¸° ì—ë””í„°**
> í°íŠ¸, í¬ê¸°, êµµê¸°, ì •ë ¬ ë“±ì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ ê²Œì‹œê¸€ì„ ê¾¸ë°€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   * register.js: iframeì˜ ë””ìì¸ëª¨ë“œë¥¼ ì‹¤í–‰í•´ iframeì— ì íŒ ê¸€ì„ ê¾¸ë°‰ë‹ˆë‹¤.
   ```java
   //iframe ë””ìì¸ëª¨ë“œ
	var iframe= document.getElementById("content_iframe").contentWindow;
	var iframeD = iframe.document;	
	iframeD.designMode = 'on';
	var iframeE = document.getElementById("content_iframe");
	iframe.focus();	
	document.getElementById("content_iframe").contentDocument
				.body.style.fontFamily  = "NanumSquareRound";
				
   ```
   
**3. íŒŒì¼ì²¨ë¶€**ğŸ“‚
> ì²¨ë¶€ ì•„ì´ì½˜ í´ë¦­ ì‹œ ë‚´ ì»´í“¨í„° ë‚´ì— ì¡´ì¬í•˜ëŠ” íŒŒì¼ 2MBì´í•˜, í™•ì¥ì .exe,.sh,.alzë¥¼ ì œì™¸í•œ íŒŒì¼ì„ ì²¨ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> ì²¨ë¶€í•œ íŒŒì¼ì€ ì €ì¥ ê²½ë¡œì™€ ê³ ìœ  ì‹ë³„ìë¥¼ ìƒì„±í•œ í›„ ì²˜ë¦¬í•©ë‹ˆë‹¤. íŒŒì¼ ë“±ë¡ì‹œ Amazon S3ì— ë°”ë¡œ ì €ì¥ë˜ì§€ë§Œ ê¸€ì“°ê¸° ì™„ë£Œ ì „ê¹Œì§„ DBì—ëŠ” ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
   * regiter.jsp: `enctype="multipart/form-data"` ì„¤ì •ì„ í•´ì£¼ë©´ íŒŒì¼ì„ í•œë²ˆì— ì—¬ëŸ¬ê°œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   ```java
   <form role="form" method="post" name="rigForm" id="rigform" onsubmit="insert(document.rigForm); return false;" enctype="multipart/form-data">
   ```
   * uploadController: UUID.randomUUIDë¥¼ ì‚¬ìš©í•´ ê³ ìœ  íŒŒì¼ëª…ì„ ìƒì„±í•©ë‹ˆë‹¤. ê³ ìœ  ì‹ë³„ìë¥¼ ìƒì„±í•˜ëŠ” ì´ìœ ëŠ” ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œì‹œ ë‹¤ë¥¸ íŒŒì¼ê³¼ í˜¼ë™í•˜ì§€ ì•Šê²Œí•˜ë©° ë‹¤ë¥¸ ì»¨í…ì¸ ì˜ ì„ì˜ ì ‘ê·¼ì„ ë°©ì§€í•©ë‹ˆë‹¤.	
   ```java
	//íŒŒì¼ë“±ë¡ : ajaxë¡œ íŒŒì¼ ê²½ë¡œìƒì„± ë° íŒŒì¼ ì €ì¥ , DBì ‘ì† X
	@PostMapping(value = "/uploadAws",produces = MediaType.APPLICATION_JSON_UTF8_VALUE)
	@ResponseBody
	public ResponseEntity<List<BoardAttachVO>> awsS3Upload(MultipartFile[] uploadFile) 
			throws IOException {
		List<BoardAttachVO> list = new ArrayList<BoardAttachVO>();
		
		//ì €ì¥í•  í´ë” ê²½ë¡œ
		try {
			String uploadFolderPath = getFolder();
			for (MultipartFile multipartFile : uploadFile) {
				BoardAttachVO attachDTO = new BoardAttachVO();
				//í´ë”
				attachDTO.setUploadPath(uploadFolderPath);
				//íŒŒì¼ì´ë¦„
				String uploadFileName = multipartFile.getOriginalFilename();
				
				uploadFileName = uploadFileName.substring(uploadFileName.lastIndexOf("\\")+1);
				attachDTO.setFileName(uploadFileName);
				//uuid ë„£ê¸°
				UUID uuid = UUID.randomUUID();
				attachDTO.setFileId(uuid.toString());	
				uploadFileName = uuid.toString() + "_" + uploadFileName;				
				awsS3.uploadMeta(multipartFile, uploadFolderPath,uploadFileName);
				list.add(attachDTO);
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
		return new ResponseEntity<>(list, HttpStatus.OK);
	}				
   ```
   * AwsS3: accessKey, secretKey, clientRegionë¥¼ ì‚¬ìš©í•´ awsS3 í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•˜ê³  bucketëª…ì„ í†µí•´ í•´ë‹¹ S3 bucketì— ì˜¬ë¦° íŒŒì¼ì„ ì €ì¥í•©ë‹ˆë‹¤.
    	* ClasspathPropertiesFileCredentialsProvider(): í•´ë‹¹ ìƒì„±ìê°€ í”„ë¡œì íŠ¸ì˜ classpathì— ìˆëŠ” AwsCredentials.properties íŒŒì¼ì„ ì½ì–´ 
    		ì•ˆì— ìˆëŠ” accessKey, secretKey ê°’ì„ ìë™ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. 
   ```java
    //aws S3 client ìƒì„±
    private void createS3Client() {
        //AWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);
        this.s3Client = AmazonS3ClientBuilder
                .standard()
                .withCredentials(new ClasspathPropertiesFileCredentialsProvider())
                //.withCredentials(new AWSStaticCredentialsProvider(credentials))
                .withRegion(clientRegion)
                .build();
    }
    //s3ì— íŒŒì¼ ì €ì¥
    public void uploadMeta(MultipartFile mfile,String uploadFolderPath,String uploadFileName) {
        ObjectMetadata objectMetadata = new ObjectMetadata();
        objectMetadata.setContentType(mfile.getContentType());
        objectMetadata.setContentLength(mfile.getSize());  
        try (InputStream inputStream = mfile.getInputStream()) {
        	s3Client.putObject(new PutObjectRequest(this.bucket+uploadFolderPath, uploadFileName, inputStream,
		objectMetadata).withCannedAcl(CannedAccessControlList.PublicRead));
        } catch (IOException e) {
            throw new IllegalArgumentException(String.format("íŒŒì¼ ë³€í™˜ ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤"));
        }
    }				
   ```

**4. ê¸€ì“°ê¸°ë“±ë¡**
> í°íŠ¸, í¬ê¸°, êµµê¸°, ì •ë ¬ ë“±ì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ ê²Œì‹œê¸€ì„ ê¾¸ë°€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   * boardMapper.xml
    	* selectKeyë¥¼ ì‚¬ìš©í•´ ë“±ë¡ì‹œ ìƒì„±ë˜ëŠ” ê²Œì‹œë¬¼ ë²ˆí˜¸ë¥¼ ë‹¤ìŒ ì¿¼ë¦¬ë¡œ returní•´ ì²¨ë¶€íŒŒì¼ì´ ìˆìœ¼ë©´ ì²¨ë¶€íŒŒì¼ ì¿¼ë¦¬ì— ê²Œì‹œë¬¼ ë²ˆí˜¸ë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤.
    	* post_group ì»¬ëŸ¼ì— ê²Œì‹œë¬¼ ë²ˆí˜¸ë¥¼ ë“±ë¡í•´ì„œ ë¶€ëª¨ê¸€ í‘œì‹œë¥¼ í•©ë‹ˆë‹¤.
   ```java
	<insert id="createCmuPage" parameterType="BrdVO">
	 	<selectKey resultType="Integer" keyProperty="postId" order="AFTER">
			select board_post_${nav}_seq.currval as postId from dual
		</selectKey>
	 	insert into board_post_${nav} 
		(post_idx,brd_idx,cate_idx,post_title,post_content,mem_id,mem_nickname,post_notice,post_group)
		values (board_post_${nav}_seq.nextval,#{brdId},#{cateId,jdbcType=VARCHAR},
		#{title},#{content},#{memId},#{memNickName},#{notice},board_post_${nav}_seq.currval)
	</insert>
   ```
   * boardAttachMapper.xml: ì²¨ë¶€í•œ íŒŒì¼ì˜ ì •ë³´(íŒŒì¼ì‹ë³„ì, ê²½ë¡œ, íŒŒì¼ì´ë¦„, ê²Œì‹œë¬¼ë²ˆí˜¸)ë¥¼ DBì— ë“±ë¡í•©ë‹ˆë‹¤. 
   ```java
   <insert id="insertFile" parameterType="BoardAttachVO" >
	insert into board_attach_${nav} (file_idx,upload_path,file_name,post_idx) 
	values(#{fileId},#{uploadPath},#{fileName},#{postId})
   </insert>
   ```
---
   
### ê¸€ ìˆ˜ì • âœ’
> ë‚´ê°€ ì‘ì„±í•œ ê¸€ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì™€ ìˆ˜ì •í•©ë‹ˆë‹¤.
   * **í™”ë©´êµ¬í˜„**  
   ![update](https://user-images.githubusercontent.com/86868936/124726581-d9399100-df48-11eb-9bcb-dabee9fc7e83.gif)

   * **ê¸°ëŠ¥êµ¬í˜„**
   	* BrdController: ìˆ˜ì •ì„ ì›í•˜ëŠ” ê¸€ì˜ ì‘ì„±ìì™€ í˜„ì¬ ì ‘ì†í•œ ìœ ì €ì˜ ì •ë³´ê°€ ì¼ì¹˜í•˜ë©´ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ì¶œë ¥í•˜ê³  ë‹¤ë¥´ë©´ í™ˆí˜ì´ì§€ ë©”ì¸ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤. (viewì— 'ìˆ˜ì •' ë²„íŠ¼ í™œì„±í™” ì¡°ê±´ì„ ì´ë¯¸ ì œì‹œí–ˆì§€ë§Œ ì˜ëª»ëœ ê²½ë¡œë¡œ ì ‘ì†í•˜ëŠ”ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‘ì„±í•¨)
   	```java
	//ìˆ˜ì •í˜ì´ì§€ ë“¤ì–´ê°€ê¸°
	@RequestMapping(value="/modify",method = RequestMethod.GET)
	public String modifyGET(@ModelAttribute("nav")String nav,String mid,String post,
			Model model,SearchCriteria cri,HttpServletRequest request) throws Exception{
		logger.info("ê²Œì‹œë¬¼ ìˆ˜ì •í˜ì´ì§€");
		Map<String,Object>map=new HashMap<String,Object>();
		Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();	
		UserDetailsVO userDetails = (UserDetailsVO)principal;	
		map.put("nav",nav);
		map.put("mid",mid);
		map.put("postId",post);
		BrdVO vo=service.read(map,2);
		try {
			if(userDetails.getUserId().equals(vo.getMemId()) || userDetails.getRole().equals("ROLE_ADMIN")) {	
				model.addAttribute(vo);					
				model.addAttribute("brd",service.brdNameListCla(mid));
				model.addAttribute("cate",service.cateNameListMid(mid));	
			}else { 
				String referer = (String)request.getHeader("REFERER");
				if(referer==null) {
					referer="redirect:/";
				}
				return referer;
			}
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}
		return "board/modify";
	}
  	 ```	
---  
   
### ê¸€ ì‚­ì œ âœ‚
> ë³¸ì¸ì´ ì‘ì„±í•œ ê¸€ì„ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   * **í™”ë©´êµ¬í˜„**  
   ![delete](https://user-images.githubusercontent.com/86868936/124726622-e0f93580-df48-11eb-9799-dbb78d5e57f6.gif)

   * **ê¸°ëŠ¥êµ¬í˜„**
   	* BrdController: ì‚­ì œì‹œ í•´ë‹¹ ê²Œì‹œë¬¼ì— ì²¨ë¶€íŒŒì¼ì´ ìˆìœ¼ë©´ ë¨¼ì € ì‹¤ì¡´ íŒŒì¼ì„ ì‚­ì œí•œ í›„ ê¸€ì„ ì‚­ì œí•©ë‹ˆë‹¤.
   	```java
	//ê²Œì‹œë¬¼ì‚­ì œ	
	@RequestMapping(value="/remove", method=RequestMethod.POST)
	@ResponseBody
	public void remove(BrdVO vo,HttpServletRequest request) throws Exception{
		logger.info("ê²Œì‹œë¬¼ ì‚­ì œ ì²˜ë¦¬");
		Map<String,Object> map=new HashMap<String,Object>();
		map.put("nav",vo.getNav());
		map.put("postId",vo.getPostId());
		try {
			List<BoardAttachVO> attachList = service.getAttachList(map);
			if(attachList!=null && attachList.size()>0) {
				attachList.forEach(attach->{
					String fileName=attach.getFileId()+"_"+attach.getFileName();
					awsS3=AwsS3.getInstance();
					awsS3.delete(attach.getUploadPath(),fileName);
				});
			}		
			service.remove(vo);
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}		
	}	
   	```
---

### ë‹µê¸€ ì“°ê¸° âœ’
> ê²Œì‹œê¸€ í…Œì´ë¸”ì— post_group, post_step, post_indent ì»¬ëŸ¼ ê°’ì„ ë³€ê²½í•´ ë‹µê¸€ì„ êµ¬ë¶„í•©ë‹ˆë‹¤.
   * **í™”ë©´êµ¬í˜„**  
   ![image](https://user-images.githubusercontent.com/86868936/124757421-866fd180-df68-11eb-8829-d6a38de23352.png)

   * **ê¸°ëŠ¥êµ¬í˜„**
  	 * ê²Œì‹œê¸€ì˜ ë‹µê¸€: post_groupì´ ë™ì¼í•œ ë°ì´í„° ì¤‘ stepì˜ ìµœê³ ê°’+1, indent+1
  	 * ë‹µê¸€ì˜ ë‹µê¸€: stepì´ ë™ì¼í•œ ë°ì´í„° ì¤‘ indentì˜ ìµœê³ ê°’+1ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
   ```java
   <!-- boardMapper.xml-->
	<!-- ê²Œì‹œê¸€ ë‹µê¸€ ë“±ë¡ -->
	<insert id="commentaireStep" parameterType="BrdVO">
		..ìƒëµ..
		insert into board_post_${nav}
			(post_idx,brd_idx,cate_idx,post_title,post_content,mem_id,mem_nickname,post_group,post_step,post_indent)
		values (board_post_${nav}_seq.nextval,#{brdId},#{cateId,jdbcType=VARCHAR},
			#{title},#{content},#{memId},#{memNickName},#{group},
			(select max(post_step)+1 from board_post_${nav} where post_group=#{group}),#{indent}+1)
	</insert>
		
	<insert id="commentaireIndent" parameterType="BrdVO">
		..ìƒëµ..
		insert into board_post_${nav}
			(post_idx,brd_idx,cate_idx,post_title,post_content,mem_id,mem_nickname,post_group,post_step,post_indent)
		values(board_post_${nav}_seq.nextval,#{brdId},#{cateId,jdbcType=VARCHAR},
			#{title},#{content},#{memId},#{memNickName},#{group},#{step},
			(select max(post_indent)+1 from board_post_${nav} where post_group=#{group} and post_step=#{step}))
	</insert>	
   ```
---

### ê²Œì‹œë¬¼ ì½ê¸° ğŸ“ƒ
> ì„ íƒí•œ ê²Œì‹œë¬¼ì˜ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ë©° ì´ì „ê¸€/ë‹¤ìŒê¸€, ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ, ëŒ“ê¸€ CURD ê¸°ëŠ¥ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
**1. ì´ì „ê¸€/ ë‹¤ìŒê¸€**
  * **í™”ë©´êµ¬í˜„**  
  ![prev_next](https://user-images.githubusercontent.com/86868936/124758471-94722200-df69-11eb-9513-f66c079e7740.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
   	* boardMapper.xml: í˜„ì¬ ê²Œì‹œë¬¼ê³¼ ì¡°ê±´ì— ë§ëŠ” ì´ì „ê¸€(prev)ê³¼ ë‹¤ìŒê¸€(next) í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ë‹´ì•„ ê°™ì´ ì¶œë ¥í•©ë‹ˆë‹¤.
	```java
	<!-- ê³µì§€ì‚¬í•­ ê¸€ë³´ê¸° -->
	<select id="readNoticePage" resultMap="boardMap" resultType="BrdVO">
	<![CDATA[
		select bp.* ,prev,next from board_post_${nav} bp,
		(SELECT post_idx prev FROM board_post_${nav} WHERE post_idx > #{postId} ORDER BY post_idx ASC ) a full outer join 
		(SELECT post_idx next FROM board_post_${nav} WHERE post_idx < #{postId} ORDER BY post_idx desc) b 
	 	on a.prev != b.next where post_idx=#{postId} and rownum = 1 ]]>
	</select>
	```
**2. ì²¨ë¶€íŒŒì¼ ëª©ë¡/ ë‹¤ìš´ë¡œë“œ** ğŸ“¥
  * **í™”ë©´êµ¬í˜„**  
  ![download](https://user-images.githubusercontent.com/86868936/124758521-9e942080-df69-11eb-972d-89bc1e00ea86.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
  	* ì²¨ë¶€íŒŒì¼ ëª©ë¡ (UploadController)
   	* ì²¨ë¶€ëœ íŒŒì¼ ëª©ë¡ì´ í‘œì‹œë˜ë©° ì²¨ë¶€ íŒŒì¼ í´ë¦­ì‹œ RESTfulë¡œ ì ‘ì†í•´ ë‹¤ìš´ë¡œë“œ í•©ë‹ˆë‹¤.   	 		 
	```java
		//UploadController
		//ì²¨ë¶€íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° : ê²Œì‹œë¬¼ ë²ˆí˜¸ë¥¼ ë°›ì•„ ì²¨ë¶€íŒŒì¼ ë°ì´í„°ë¥¼ jsonìœ¼ë¡œ ë°˜í™˜
		@GetMapping("/getAttachList")	
		public @ResponseBody ResponseEntity<List<BoardAttachVO>> loadFile(String nav,String postId) throws Exception{
			logger.info("loadFile");
			Map<String,Object> map=new HashMap<String,Object>();
			List<BoardAttachVO> list = new ArrayList<>();
			try {
				map.put("nav",nav);
				map.put("postId",postId);		
				list=fileDAO.getAttachList(map);
			}catch(UnsupportedEncodingException e){
				e.printStackTrace();
			}
			return new ResponseEntity<>(list,HttpStatus.OK);
		}
	```
   	* ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ (UploadController)
    	* aws s3ì— ìˆëŠ” íŒŒì¼ì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œ íŒŒì¼ ìœ„ì¹˜ urlí´ë˜ìŠ¤ ê°ì²´ ìƒì„± í›„ url.openConnection()ë¡œ URLConnection ì¶”ìƒí´ë˜ìŠ¤ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
    	* í”„ë¡œí† ì½œì— ë§ì¶° í•˜ìœ„ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì–»ê³ (HttpURLConnection) InputStreamìœ¼ë¡œ ê°’ì„ ë°˜í™˜ ì‹œí‚µë‹ˆë‹¤.
    	* HttpHeadersì— 'user-Agent'ë¡œ ì ‘ì†í•œ ì›¹ë¸Œë¼ìš°ì €ì— ë”°ë¼ íŒŒì¼ ì´ë¦„ ì¸ì½”ë”©ì„ í•œ í›„ HttpHeaderì— íŒŒì¼ì´ë¦„ê³¼ ê²½ë¡œë¥¼ ë„£ì–´ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. 

```java
	//ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ
	@GetMapping(value="/download" ,produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)
	public @ResponseBody ResponseEntity<byte[]> getFile(@RequestHeader(value="User-Agent")String userAgent,String path,String fileName){
		logger.info("fileName: "+ fileName);
		ResponseEntity<byte[]> result = null;
		  try {
			  HttpHeaders header = new HttpHeaders();
			  URL url = new URL(awsS3.getFileURL(path,fileName));
			  HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();
			  InputStream fileIS = urlConn.getInputStream();
			  String rscOriginalName = fileName.substring(fileName.indexOf("_")+1);
			  String downloadName = null;
			  if(userAgent.contains("Trident")) {
					logger.info("IE browser");
					downloadName = URLEncoder.encode(rscOriginalName, "UTF-8").replaceAll("\\+", " ");
					logger.info("Edge name: " + downloadName);
				}else if(userAgent.contains("Edge")) {
					logger.info("Edge browser");
					downloadName = new String(rscOriginalName.getBytes("UTF-8"));
				}else {
					logger.info("Chrome browser");
					downloadName = new String(rscOriginalName.getBytes("UTF-8"), "ISO-8859-1");
				}		  
			header.add("Content-Disposition", "attachment; filename=" + downloadName);
		    header.add("Content-Type", URLConnection.guessContentTypeFromStream(fileIS));
		    result = new ResponseEntity<>(IOUtils.toByteArray(fileIS), header, HttpStatus.OK);
		  
		  } catch(IOException e) {
			 logger.info("wrong file path");
		  }
		  return result;
	}
```
---

### ëŒ“ê¸€ê¸°ëŠ¥ ğŸ“Œ
> ê° ê²Œì‹œë¬¼ì— ëŒ“ê¸€ ì½ê¸°(ë¦¬ìŠ¤íŠ¸), ë“±ë¡, ìˆ˜ì •, ì‚­ì œë¥¼ RESTful APIë¡œ ì ‘ê·¼ ì œê³µí•©ë‹ˆë‹¤.
  * **í™”ë©´êµ¬í˜„**  
  ![reply](https://user-images.githubusercontent.com/86868936/124764603-18c7a380-df70-11eb-8c82-c0902f4599e8.gif)

  * **ê¸°ëŠ¥êµ¬í˜„**  
 	**1.ëŒ“ê¸€ë¦¬ìŠ¤íŠ¸**: ì„ íƒí•œ ê²Œì‹œë¬¼ì˜ ì´ ëŒ“ê¸€ì„ ê°€ì ¸ì™€ í˜ì´ì§• ì²˜ë¦¬í•´ ModelAndViewë¡œ ë°ì´í„°ì™€ ì´ë™í•˜ê³ ì í•˜ëŠ” view pageë¥¼ ê°™ì´ ì €ì¥í•œë‹¤.(jsì—ì„œ ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ ì •ë¦¬í•´ ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ë¡œ ì¶œë ¥í•´ì¤ë‹ˆë‹¤.)     
     ```java
     	//ReplyController
	@RequestMapping(value="/list/{nav}/{postId}/{pageNum}" , method = RequestMethod.POST)
	public ModelAndView replyList(@PathVariable("nav") int nav,@PathVariable("postId") int postId, 
			@PathVariable("pageNum") int pageNum, ModelAndView mav) {
		logger.info("ëŒ“ê¸€ë¦¬ìŠ¤íŠ¸");	
		ResponseEntity<Map<String, Object>> entity = null;
		try {
			//í•œ í˜ì´ì§€ì— ëŒ“ê¸€ ì¶œë ¥ìˆ˜ voì— ë„£ê¸°
			SearchCriteria cri = new SearchCriteria();
			cri.setPage(pageNum);
			
			Map<String,Object> map = new HashMap<>(); 
			map.put("nav",nav);
			map.put("postId",postId);
			map.put("cri",cri);			
			
			//í˜ì´ì§€ë²ˆí˜¸
			PageMaker pageMk = new PageMaker();			
			int count=service.count(map);
			//ê²Œì‹œë¬¼ í´ë¦­ì‹œ ë§¨ ë§ˆì§€ë§‰ í˜ì´ì§€ë²ˆí˜¸ë¡œ ì´ë™ 
			if(pageNum==0) {
				int num=(int)(Math.ceil(count/(double)cri.getPageLen()));
				cri.setPage(num);
			}
			pageMk.setCri(cri);
			pageMk.setTotalCount(count); 	//ì´ê°œìˆ˜
			
			mav.addObject("replyList", service.listReplyPage(map));			
			mav.addObject("pageMkRp", pageMk);
			mav.addObject("replyCnt",pageMk.getTotalCount());
			mav.addObject("replyPrint",1);		//viewêµ¬ë¶„
			mav.setViewName("/board/brdnormal");//ë·°ì˜ ì´ë¦„
						
			entity = new ResponseEntity<Map<String, Object>>(map, HttpStatus.OK);
		}catch (Exception e) {
			e.printStackTrace();
			entity = new ResponseEntity<>(HttpStatus.BAD_REQUEST);
		}
		return mav;
	}
     ```
     **2. ëŒ“ê¸€ ë“±ë¡**: POSTë¡œ ì „ì†¡ëœ ê³„ì • ì•„ì´ë””ì™€ ë‹‰ë„¤ì„ ê°’ì„ ê°€ì ¸ì™€ ì…ë ¥ëœ ëŒ“ê¸€ ë‚´ìš©ì„ ë“±ë¡í•©ë‹ˆë‹¤.
   ```java
   	//ReplyController
	@RequestMapping(value="/insert", method = RequestMethod.POST)
	public ResponseEntity<String> replyInsert(@RequestBody ReplyVO vo){
		ResponseEntity<String> entity = null;
		logger.info("ëŒ“ê¸€ì“°ê¸°");		
		try {
			UserDetailsVO user=(UserDetailsVO)SecurityContextHolder.getContext().getAuthentication().getPrincipal();
			vo.setMemId(user.getUserId());
			vo.setMemNickName(user.getUserNickName());
			service.replyInsert(vo);
			entity = new ResponseEntity<String>("success",HttpStatus.OK);
		}catch (Exception e) {
			e.printStackTrace();
			entity=new ResponseEntity<String>(HttpStatus.BAD_REQUEST);
		}
		return entity;
	}
   ```
   **3. ëŒ“ê¸€ ìˆ˜ì •**: PUT(ì „ì²´ê°’) ë˜ëŠ” PUSH(ìˆ˜ì •ë¶€ë¶„ë§Œ)ë¡œ ì „ì†¡ëœ ê°’ìœ¼ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤. ëŒ“ê¸€ ìˆ˜ì •ì‹œ ë“±ë¡ë‚ ì§œë¥¼ ìˆ˜ì •ëœ ë‚ ì§œë¡œ ë°”ê¿‰ë‹ˆë‹¤.
   ```java
  	 //ReplyController
	@RequestMapping(value="/reply_update",method = { RequestMethod.PUT, RequestMethod.PATCH })
	public ResponseEntity<String> replyUpdate(@RequestBody ReplyVO vo){
		ResponseEntity<String> entity = null;
		logger.info("ëŒ“ê¸€ìˆ˜ì •");	
		//String userId = (String) session.getAttribute("userId");
		try {
			service.replyUpdate(vo);
			entity = new ResponseEntity<String>("success",HttpStatus.OK);
		}catch (Exception e) {
			e.printStackTrace();
			entity=new ResponseEntity<String>(e.getMessage(),HttpStatus.BAD_REQUEST);
		}
		return entity;
	}
	
	//replyMapper.xml
	<!-- ëŒ“ê¸€ìˆ˜ì • -->
	<update id="updateReply" >
		<![CDATA[ update reply_${nav} set reply_content=#{rpContent} ,reply_update = sysdate  
		where reply_idx=#{replyId} and post_idx=#{postId}]]>
	</update>
   ``` 
   **4. ëŒ“ê¸€ ì‚­ì œ**: DELETEë¡œ ì „ì†¡ëœ ëŒ“ê¸€ì •ë³´ë¡œ ëŒ“ê¸€ ë°ì´í„°ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
   ```java
   	//ReplyController
	@RequestMapping(value="/reply_delete",method = RequestMethod.DELETE)
	public ResponseEntity<String> replyDelete(@RequestBody ReplyVO vo){
		ResponseEntity<String> entity = null;
		logger.info("ì‚­ì œ");
		try {
			service.replyDelete(vo);
			entity = new ResponseEntity<String>("success",HttpStatus.OK);
		}catch (Exception e) {
			e.printStackTrace();
			entity=new ResponseEntity<String>(e.getMessage(),HttpStatus.BAD_REQUEST);
		}
		return entity;
	}
   ```
---

### ì±„íŒ… ğŸ—¨
> WebSocketì„ ì‚¬ìš©í•´ ë‹¤ìê°„ ì±„íŒ… ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
* **í™”ë©´êµ¬í˜„**  
![chatting](https://user-images.githubusercontent.com/86868936/124860600-dee8b280-dfec-11eb-884b-0e06afe0efcb.gif)


* **ê¸°ëŠ¥êµ¬í˜„**
   *  **ì±„íŒ…ë°© ì…ì¥**: ì›¹ì†Œì¼“ì„ ìƒì„±í•˜ê³  SessionListì— sessionì„ ì¶”ê°€í•©ë‹ˆë‹¤. sessionList.size()ë¡œ ì±„íŒ…ë°© ì ‘ì† ì¸ì›ìˆ˜ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
	```java
	//WebSocketChat
	// ì ‘ì† ëœ í´ë¼ì´ì–¸íŠ¸ WebSocket session ê´€ë¦¬ ë¦¬ìŠ¤íŠ¸
	 private static final List<Session> sessionList=new ArrayList<Session>();
	//ì›¹ì†Œì¼“ìƒì„±
	@OnOpen
	public void onOpen(Session session) throws IOException {
		logger.info("ì—°ê²°ëœ ID : "+session.getId());
		try {
			sessionList.add(session);
		}catch(Exception e){
			System.out.println(e.getMessage());
		}
	}
	//ì±„íŒ…ë°©ì¸ì›ìˆ˜
	@PostMapping("/size")
	public @ResponseBody int listSize()  throws Exception{
		return sessionList.size();		
	}
	```
   *  **ì±„íŒ… ë©”ì„¸ì§€ ì „ì†¡**
   	*  'ë‹‰ë„¤ì„,ë©”ì„¸ì§€,íƒ€ì…'ìœ¼ë¡œ ë„˜ì–´ì˜¤ëŠ” ê°’ì„ ','ì„ ê¸°ì¤€ìœ¼ë¡œ ì˜ë¼ sendAllSessionToMessage()ë©”ì†Œë“œë¡œ ê°’ì„ ì „ì†¡í•©ë‹ˆë‹¤.
   	*  ì „ì†¡ëœ ë©”ì„¸ì§€ íƒ€ì…ìœ¼ë¡œ ì…ì¥, í‡´ì¥, ìœ ì €ì±„íŒ…ê¸€ êµ¬ë¶„í•´ ì±„íŒ…ë°©ì— ì ‘ì†ëœ ëª¨ë“  ì‚¬ìš©ìë“¤ì—ê²Œ ë©”ì„¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
	```java
	//WebSocketChat
	//ë©”ì„¸ì§€ ì…ë ¥
    	@OnMessage
   	 public void onMessage(String message,Session session) throws Exception{	    	
       	 	logger.info("Message From ");
		try {
	    		String sender = message.split(",")[0];
	    		String text = message.split(",")[1];
	    		String type = message.split(",")[2];  
			sendAllSessionToMessage(session,sender,text,type);
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}         
	}
	//ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ë©”ì„¸ì§€ ì „ì†¡
	private void sendAllSessionToMessage(Session self, String sender, String text,String type) throws Exception{
		try {
			for(Session session:WebSocketChat.sessionList ) {					
			    if(type.equals("ENTER")){	 
			    	session.getBasicRemote().sendText("<div class='enter-alarm'>"+sender+"ë‹˜ì´ ì…ì¥í•˜ì…¨ìŠµë‹ˆë‹¤.</div>");
			    }else if(type.equals("LEAVE")){
			    	session.getBasicRemote().sendText("<div class='enter-alarm'>"+sender+"ë‹˜ì´ í‡´ì¥í•˜ì…¨ìŠµë‹ˆë‹¤.</div>");
			    }else if(type.equals("CHAT")){			    	
			    	if(self.getId().equals(session.getId())) {
			    		session.getBasicRemote().sendText("<div class='_right box'>"
			    				+ "<div class='msgbox'>"
			    				+text+"</div><div class='triangle trg_r'></div>"
			    				+ "<div class='usernick'>"+sender+"</div></div>");	
			    	}else {
			    		session.getBasicRemote().sendText("<div class='_left box'>"
			    				+sender+"<div class='triangle trg_l'></div>"
			    				+ "<div class='msgbox'>"+text+"</div></div>");
			    	}	
			    }
			}	
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}
	}
	```
   *  **ì±„íŒ…ë°© í‡´ì¥**: ì±„íŒ…ë°© í‡´ì¥ì‹œ sessionListì•ˆì— ì¡´ì¬í•˜ëŠ” í•´ë‹¹ ìœ ì €ì˜ session ê°’ì„ ì‚­ì œí•©ë‹ˆë‹¤.
	```java
	//WebSocketChat
	//ì†Œì¼“ë‹«ê¸°
	@OnClose
	public void onClose(Session session)  throws Exception{	
		try {
			logger.info("í‡´ì¥ : "+session.getId());
			sessionList.remove(session);			
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}
	}
	```
---

### ë§ˆì´í˜ì´ì§€ ğŸ¥
> ë§ˆì´í˜ì´ì§€ ë‚´ì— ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ í•œë²ˆ ë” ì…ë ¥í•´ì•¼í•©ë‹ˆë‹¤. ModelAndViewë¡œ ê°’ê³¼ ì£¼ì†Œë¥¼ ì „ë‹¬í•˜ê¸° ë•Œë¬¸ì— ìƒˆë¡œê³ ì¹¨ì‹œ ë§ˆì´í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
**1. íšŒì›ì •ë³´ìˆ˜ì •**
> ë¹„ë°€ë²ˆí˜¸, ë‹‰ë„¤ì„, ì´ë©”ì¼, ì „í™”ë²ˆí˜¸, ì£¼ì†Œë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  * **í™”ë©´êµ¬í˜„**  
  ![myinfo](https://user-images.githubusercontent.com/86868936/124860685-0770ac80-dfed-11eb-9733-693e7c57be38.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
  	* MemberController: ì •ë³´ ìˆ˜ì •ì„ ê°ê° ë”°ë¡œ ë°›ì•„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë°›ì•„ì˜¤ëŠ” ê°’ì´ nullì´ ì•„ë‹Œ ê²ƒì„ ì°¾ì•„ ìˆ˜ì •í•©ë‹ˆë‹¤.	
  ```java
  @PostMapping("/info_modify")
	public @ResponseBody int infoModify(MemberVO vo) throws Exception{		
		logger.info("íšŒì›ì •ë³´ìˆ˜ì •");
		Map<String,String> map=new HashMap<String,String>();
		int modify=0;
		try {			
			map.put("id",vo.getUserId());
			if(vo.getUserNickName()!=null) {	//ë‹‰ë„¤ì„
				map.put("nick",vo.getUserNickName());
			}else if(vo.getUserPw()!=null) {	//ë¹„ë°€ë²ˆí˜¸
				System.out.println(vo.getUserPw());
				map.put("pw",vo.getUserPw());
			}else if(vo.getEmail()!=null) {		//ì´ë©”ì¼
				map.put("email",vo.getEmail());
			}else if(vo.getPhoneNum()!=null) {	//í°ë²ˆí˜¸
				map.put("phone",vo.getPhoneNum());
			}else if(vo.getPostCode()!=null) {	//ì£¼ì†Œ
				map.put("postCode",vo.getPostCode());
				map.put("roadAddr",vo.getRoadAddr());
				if(vo.getDetailAddr()!=null) {
					map.put("detailAddr",vo.getDetailAddr());
				}
			}
			modify=service.infoModify(map);	
	    }catch(Exception e) {
	    	System.out.println(e.getMessage());
	    }
	    return modify;		
	}
  ```
**2. ê²Œì‹œë¬¼ê´€ë¦¬/ ëŒ“ê¸€ê´€ë¦¬**
> ë‚´ê°€ ì“´ ê²Œì‹œë¬¼ ì œëª©, ëŒ“ê¸€ ì„ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° ì„ íƒ í›„ ì‚­ì œ ê°€ëŠ¥í•©ë‹ˆë‹¤.
  * **í™”ë©´êµ¬í˜„**  
  	* ê²Œì‹œë¬¼ê´€ë¦¬
  	![myboard](https://user-images.githubusercontent.com/86868936/124865716-23c51700-dff6-11eb-8980-b72a5a4449eb.gif)
	
	* ëŒ“ê¸€ê´€ë¦¬
	![myreply](https://user-images.githubusercontent.com/86868936/124865745-35a6ba00-dff6-11eb-8810-49de90a12459.gif)

  * **ê¸°ëŠ¥êµ¬í˜„**  
  	* MemberController 
  		* ë¦¬ìŠ¤íŠ¸: ì ‘ì†í•œ ìœ ì € ì •ë³´ë¥¼ ê°€ì ¸ì™€ í•´ë‹¹ ìœ ì €ê°€ ì‘ì„±í•œ ëª¨ë“  ê¸€ì„ í˜ì´ì§•í•´ì„œ ModelAndViewë¡œ ì „ì†¡í•©ë‹ˆë‹¤.
  		* ì‚­ì œ: Arrayë¡œ ì „ì†¡ëœ ì²´í¬ë°•ìŠ¤ ê°’ì„ `@RequestParam(value="postIdArr[]") List<String>`ë¡œ ë°›ì•„ì˜µë‹ˆë‹¤.
  	```java
 	 //ë‚´ê°€ ì“´ ê²Œì‹œë¬¼ ë¦¬ìŠ¤íŠ¸
	@PostMapping("/myBoard")
	public @ResponseBody ModelAndView myBoardList(Integer page, Model model, SearchCriteria cri) throws Exception {
		logger.info("ë‚´ ê²Œì‹œë¬¼ ë³´ê¸°");
		ModelAndView mv = new ModelAndView();
		try {
			Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();		
			UserDetailsVO userDetails = (UserDetailsVO)principal;	
			
			Map<String,Object> map = new HashMap<String,Object>();
			map.put("userId", userDetails.getUserId());	
			map.put("cri", cri);	
			model.addAttribute("board",service.myBoard(map));	
			
			PageMaker pageMk=new PageMaker();
			pageMk.setCri(cri);
			pageMk.setTotalCount(service.myBoardCnt(userDetails.getUserId()));
			cri.setPage(page);
			model.addAttribute("pageMk", pageMk);
			
			mv.setViewName("/member/mypageboard");
		}catch(Exception e){
			System.out.println(e.getMessage());
		}
		return mv;
	}
	
  	//ê²Œì‹œë¬¼ì‚­ì œ
	@PostMapping("/myBoardDelete")
	public @ResponseBody int myBoardDelete(@RequestParam(value="postIdArr[]") List<String> postIdArr )throws Exception{
	    logger.info("ë‚´ ê²Œì‹œë¬¼ ì‚­ì œ");
	    int result=0;
	    try {
		result=service.myBoardDel(postIdArr);    	
	    }catch(Exception e) {
	    	System.out.println(e.getMessage());
	    }
	    return result;
	}
  	```
  
  	* memberMapper.xml: íŒŒë¼ë¯¸í„° íƒ€ì…ì„ `java.util.List`ë¡œ ì„¤ì •í•˜ê³  ë™ì  ì¿¼ë¦¬ foreachë¬¸ì„ ì‚¬ìš©í•´ ê°’ì„ í•˜ë‚˜ì”© ì‚­ì œí•©ë‹ˆë‹¤.
  	* foreachë¬¸
  		* collection=list ë˜ëŠ” Array í˜•íƒœë¡œ ì „ë‹¬ë°›ì€ ì¸ì
		* item: ì „ë‹¬ ë°›ì€ ê°’ì˜ ëª… ì„¤ì •
		* open/ close: êµ¬ë¬¸ ì‹œì‘ ë¬¸ìì—´/ ì¢…ë£Œ ë¬¸ìì—´
		* separator: ë°˜ë³µì„ êµ¬ë¶„í•˜ëŠ” ë¬¸ìì—´
	```java
	<!-- ì„ íƒí•œ ê²Œì‹œë¬¼ ì‚­ì œ -->
	<delete id="myBoardDel" parameterType="java.util.List">
		delete from board_post_20000 
		<where>
			post_idx in 
			<foreach collection="list" item="item" open="(" close=")" separator=",">
				 #{item}
			</foreach>
		</where>		
	</delete>
	<!-- ë‚´ê°€ ì“´ ëŒ“ê¸€ ì‚­ì œ -->
	<delete id="myReplyDel" parameterType="java.util.List">
		delete from reply_20000 
		<where>
			reply_idx in 
			<foreach collection="list" item="item" open="(" close=")" separator=",">
				 #{item}
			</foreach>
		</where>		
	</delete>
  	```
	
**3. íšŒì›íƒˆí‡´** ğŸš€
> íƒˆí‡´ì‹œ ì‚¬ìš©ì ê¶Œí•œì„ ë³€ê²½í•´ ê³„ì •ì˜ ì•„ì´ë””ì™€ ì´ë©”ì¼, ë‹‰ë„¤ì„ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 7ì¼ ì´í›„ ëª¨ë“  ì •ë³´ê°€ ì‚­ì œë©ë‹ˆë‹¤.
**1. íšŒì›íƒˆí‡´ í´ë¦­ì‹œ**
  * **í™”ë©´êµ¬í˜„**  
  ![leave](https://user-images.githubusercontent.com/86868936/124869640-7275af80-dffc-11eb-8a2a-2f0d61b9bd5e.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
   	* MemberController: í˜„ì¬ ì ‘ì†ëœ ê³„ì •ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì™€ íƒˆí‡´ì²˜ë¦¬ í›„ ê²°ê³¼ ê°’(1)ì„ ì „ì†¡í•©ë‹ˆë‹¤.
	  ```java
		//íšŒì›íƒˆí‡´ì²˜ë¦¬
		@PostMapping(value="/memLeave")
		public @ResponseBody int memLeave() throws Exception{
			logger.info("íƒˆí‡´ì²˜ë¦¬");
			int result=0;
			try {
			    Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();
			    UserDetailsVO userDetails = (UserDetailsVO)principal;			    
			    String userId=userDetails.getUserId();
			    result=service.homeLeave(userId);
			}catch(Exception e) {
				System.out.println(e.getMessage());
			}
			return result; 
		}
	  ```
	  
   	* memberMapper.xml: íƒˆí‡´ ìš”ì²­í•œ ê³„ì •ì˜ ê¶Œí•œì„ `ROLE_LEAVE`ë¡œ ë³€ê²½í•´ ì‚¬ì´íŠ¸ ì ‘ê·¼ì„ ë§‰ê³  ì•„ì´ë””ì™€ ì´ë©”ì¼, ë‹‰ë„¤ì„ ì¬ì‚¬ìš©ì„ ë§‰ìŠµë‹ˆë‹¤. 
	  ```java
		<!-- íšŒì›íƒˆí‡´ -->
		<update id="memLeave" parameterType="hashmap">
			update member_info set mem_role='ROLE_LEAVE', mem_levdate=sysdate where mem_id=#{userId}
		</update>
	  ```
	  
   	* member.js: íƒˆí‡´ ì™„ë£Œì‹œ ë¡œê·¸ì•„ì›ƒí•©ë‹ˆë‹¤.
   	```java
	success:function(data){
		if(data==0){
			alert('ì„œë²„ ì˜¤ë¥˜ë¡œ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.');
		}else{
			alert('íšŒì›íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.ë³´ë‹¤ ë‚˜ì€ ì„œë¹„ìŠ¤ë¡œ ë‹¤ì‹œ ë§Œë‚˜ëµ ìˆ˜ ìˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤.');
			location.href="/member/logout";
		}
	}
	```
**2. íƒˆí‡´ 7ì¼í›„** 
  * **ê¸°ëŠ¥êµ¬í˜„**
  	* AutoDelete: ë§¤ì¼ 12ì‹œ 10ë¶„ì— ìë™ ì‹¤í–‰í•©ë‹ˆë‹¤. 
  	* í˜„ì¬ ì‹œê°„ - íƒˆí‡´ ê³„ì •ì˜ ë‚ ì§œë¥¼ ì‹œê°„ìœ¼ë¡œ ë°”ê¿” ê³„ì‚°í•´ ë‹¤ì‹œ dayë¡œ ê³„ì‚°í•œ í›„ `days>7`ì‹œ í•´ë‹¹ ê³„ì •ì„ ì‚­ì œí•©ë‹ˆë‹¤.  	 
	```java
	//íƒˆí‡´í•œ íšŒì› 7ì¼í›„ ìë™ ì‚­ì œ, ìë™ ì‚­ì œ ë§¤ì¼ 0ì‹œ10ë¶„
	@Scheduled(cron="0 10 00 * * ?")
	public void autoDeleteUser() throws Exception {	
		System.out.println("íƒˆí‡´ ìœ ì € ìë™ ì‚­ì œ>>>>>>>>>>>>>>>>>");
		Calendar cal=Calendar.getInstance();	
		cal.setTime(new Date()); //í˜„ì¬ë‚ ì§œì €ì¥		
		List<MemberVO> memList=adminDAO.levMemList(); //íƒˆí‡´ë©¤ë²„
		Calendar levCal=Calendar.getInstance();			
		memList.forEach(mem->{
			try {
				levCal.setTime(mem.getLevDate());
				//í˜„ì¬ì‹œê°„ - íƒˆí‡´ì‹œê°„
				long sec=cal.getTimeInMillis()-levCal.getTimeInMillis();
				int days=(int)sec/(24*60*60*1000);
				if(days>7) {
					adminDAO.deleteMem(mem.getUserId());					
				}
			}catch(Exception e) {
				System.out.println(e.getMessage());
			}
		});
	}
	```
	* adminMapper: í•´ë‹¹ ê³„ì • ì•„ì´ë””ë¥¼ ì°¾ì•„ ì‚­ì œí•©ë‹ˆë‹¤.  	 
	```java
	<!-- íšŒì›ì‚­ì œ -->
	<delete id="deleteMem">
		delete from member_info where mem_id=#{value}
	</delete>
	```
---

### ê´€ë¦¬ì í˜ì´ì§€ ğŸ”
**1. ìœ ì €ê´€ë¦¬** 
> ì´ ìœ ì € ìˆ˜, ì•„ì´ë””, ë‹‰ë„¤ì„, ìƒíƒœ(ê¶Œí•œ), ê°€ì…ì¼, ê²Œì‹œê¸€ìˆ˜, ëŒ“ê¸€ìˆ˜ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ì•„ì´ë”” ë˜ëŠ” ë‹‰ë„¤ì„ìœ¼ë¡œ ìœ ì €ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
> ìœ ì €ë¥¼ ì„ íƒ í•œ í›„ ìœ ì € ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(í™œë™/ í™œë™ì •ì§€)
  * **í™”ë©´êµ¬í˜„**  
  ![user_manager](https://user-images.githubusercontent.com/86868936/124869730-9507c880-dffc-11eb-90d8-cf33adc57605.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„**
   	* MemberController: ì„ íƒí•œ ìœ ì €ì˜ ìƒíƒœ ë³€ê²½ì„ ë„˜ì–´ì˜¨ role ê°’ìœ¼ë¡œ êµ¬ë¶„í•´ í™œë™ ë˜ëŠ” í™œë™ì •ì§€ë¥¼ í•©ë‹ˆë‹¤. 
	 ```java
	//ìœ ì €ìƒíƒœë³€ê²½
	@PostMapping("/userRoleModify")
	public @ResponseBody int chkUserRoleModify(@RequestParam(value="userIdArr[]") List<String> userIdArr,String role) 
		throws Exception{
		logger.info("ì„ íƒ ìœ ì € ìƒíƒœ ë³€ê²½");
		int result=0;
		try {
			if(role.equals("stop")) {
				role="ROLE_STOP";
			}else {
				role="ROLE_MEMBER";
			}
			Map<String,Object> map = new HashMap<String,Object>();
			map.put("userIdArr", userIdArr);
			map.put("role", role);
			result=service.chkUserRoleModify(map);
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}
		return result;
	}
	``` 
	* adminMapper.xml
		* ìœ ì €ë¦¬ìŠ¤íŠ¸: ê´€ë¦¬ìì •ë³´ê¹Œì§€ í¬í•¨í•œ ìœ ì € ì „ì²´ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. ê²€ìƒ‰ ì¡°ê±´(ì•„ì´ë””, ë‹‰ë„¤ì„)ì„ ì¶”ê°€í•´ ê²€ìƒ‰ì–´ì— ë§ëŠ” ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. 
		* ìƒíƒœ ë³€ê²½: foreachë¬¸ì„ ì‚¬ìš©í•´ ê³„ì • ìƒíƒœë¥¼ ë°˜ë³µì²˜ë¦¬í•©ë‹ˆë‹¤.
	```java
	<!-- ìœ ì € ì „ì²´ ë¦¬ìŠ¤íŠ¸ -->
	<select id="userList" resultType="hashmap" parameterType="hashmap">
		<![CDATA[select b.* from( 
		select ROWNUM rn, mem_id,mem_nickname,to_char(mem_regdate,'yy.mm.dd') mem_regdate,mem_role, 
            	(select count(*) from board_post_20000 bp where a.mem_id=bp.mem_id)+
            	(select count(*) from board_post_10000 bp where a.mem_id=bp.mem_id) board_sum, 
            	(select count(*) from reply_20000 bp where a.mem_id=bp.mem_id) reply_sum 
           	from member_info a 
        	where rownum <= #{cri.page} * #{cri.pageLen}]]>
        	<include refid="search" />
        	<![CDATA[order by mem_regdate) b 
        where rn > (#{cri.page} -1) * #{cri.pageLen}  order by rn]]>
	</select>
	<!-- ìœ ì € ê²€ìƒ‰ ì¡°ê±´ -->
	<sql id="search">
		<if test="cri.searchType != null">		
			<if test="cri.searchType == '0'.toString()"> and mem_id like '%'||#{cri.keyword}||'%' </if>
			<if test="cri.searchType == '1'.toString()"> and mem_nickname like '%'||#{cri.keyword}||'%' </if>
		</if>
	</sql>
	<!-- ìœ ì € ìƒíƒœ ë³€ê²½ -->
	<update id="chkUserRoleModify" parameterType="java.util.List">
		update member_info set mem_role=#{role}
		<where> mem_id in
			<foreach collection="userIdArr" item="item" open="(" close=")" separator=",">
				#{item}
			</foreach>
		</where>
	</update>
	```
**2. ë©”ë‰´ê´€ë¦¬**
> ê²Œì‹œíŒ ë©”ë‰´, ê²Œì‹œíŒ, ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
> ê²Œì‹œíŒ ë©”ë‰´ ì‚­ì œì‹œ í•˜ìœ„ ê²Œì‹œíŒê³¼ ì¹´í…Œê³ ë¦¬ë„ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤. ê²Œì‹œíŒ ì‚­ì œì‹œ í•˜ìœ„ ì¹´í…Œê³ ë¦¬ë„ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.  
  * **í™”ë©´êµ¬í˜„**  
  ![menu_manager](https://user-images.githubusercontent.com/86868936/124869787-a9e45c00-dffc-11eb-8989-4f41589f7751.gif)
  
  * **ê¸°ëŠ¥êµ¬í˜„(ì½”ë“œë¦¬ë·° ê²Œì‹œíŒë§Œ ì‘ì„±)**
   	* adminMapper.xml
   		* ê²Œì‹œíŒ ìƒì„±: ê²Œì‹œíŒ ë©”ë‰´ì— ì²« ê²Œì‹œíŒ ìƒì„±ì‹œ mapìœ¼ë¡œ ë°›ì•„ì˜¨ ê°’ì„ ë„£ê³  `ìš°ì„ ìˆœìœ„ ê°’ì„ 1`ë¡œ ê¸°ì…í•´ì„œ ì²˜ë¦¬, 
   		* ê·¸ ë‹¤ìŒ ê²Œì‹œíŒ ìƒì„±ì€ í˜„ì¬ ê²Œì‹œíŒ ë©”ë‰´ì˜ ê²Œì‹œíŒ `ìš°ì„ ìˆœìœ„ ìµœê³ ê°’+1` ì²˜ë¦¬í•©ë‹ˆë‹¤.
   		* ê²Œì‹œíŒ ìˆ˜ì •/ ì‚­ì œ: ê²Œì‹œíŒ IDê°’ìœ¼ë¡œ ê²Œì‹œíŒëª…ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ê²Œì‹œíŒ ë°ì´í„°ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. ì‚­ì œì‹œ í•˜ìœ„ ì¹´í…Œê³ ë¦¬ë„ ì‚­ì œë©ë‹ˆë‹¤.
	 ```java
	 <!-- ìƒˆë¡œ ìƒì„±í•œ ê²Œì‹œíŒ ë©”ë‰´ì— ì²« ê²Œì‹œíŒ ìƒì„±ì‹œ : ìš°ì„ ìˆœìœ„=1-->
	<insert id="firBoardName" parameterType="hashmap">
		insert into board_list values(board_list_seq.nextval,#{brdName},1,${brdMenuIdx})
	</insert>
	 <!-- ê²Œì‹œíŒ ì¶”ê°€ -->
	 <insert id="addBoardName" parameterType="hashmap">
		insert into board_list values(board_list_seq.nextval,#{brdName},
		(select max(brd_order)+1  from board_list where brd_menu_idx=${brdMenuIdx}),${brdMenuIdx})
	</insert>
	
	<!-- ê²Œì‹œíŒ ìˆ˜ì •/ì‚­ì œ -->
	<update id="brdModify" parameterType="hashmap">
		update board_list set brd_name=#{brdValue} where brd_idx=${brdId}
	</update>
	<delete id="brdDelete">
		delete from board_list where brd_idx=${brdId}
	</delete>
	 ```
	 * ê²Œì‹œíŒ í…Œì´ë¸” ìƒì„±ì‹œ ì œì•½ì¡°ê±´('brd_menu_idx'ê°’ì„ fkë¡œ ë“±ë¡í•´ ê²Œì‹œíŒë©”ë‰´ ë°ì´í„° ì‚­ì œì‹œ í•´ë‹¹ ê°’ì„ ê°€ì§€ê³  ìˆëŠ” ë°ì´í„° ìë™ ì‚­ì œ)ì„ ì„¤ì •í•´ ìƒìœ„ ë°ì´í„°ê°€ ì‚­ì œë˜ë©´ ì—°ê²°ëœ í•˜ìœ„ ë°ì´í„°ë„ í•¨ê»˜ ì‚­ì œí•©ë‹ˆë‹¤.
	 ```java
	 ...ìƒëµ... --ê²Œì‹œíŒ ì œì•½ì¡°ê±´: ê²Œì‹œíŒ ë©”ë‰´ ì‚­ì œì‹œ í•´ë‹¹ ê²Œì‹œíŒ ì‚­ì œ
	 constraint board_list foreign key (brd_menu_idx) 
	references board_menu (brd_menu_idx)
	on delete cascade
	 ```
### ê¸°íƒ€ê¸°ëŠ¥ ğŸ‹
> ì£¼ê¸°ì ì¸ ì‘ì—…ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ @Scheduled ì–´ë…¸í…Œì´ì…˜ì„ ì ìš©í•©ë‹ˆë‹¤. cron í‘œí˜„ì‹ìœ¼ë¡œ ìë™ ì‹¤í–‰ ë‚ ì§œì™€ ì‹œê°„ì„ ì„¤ì •í•©ë‹ˆë‹¤.
   * DBì— ì—†ëŠ” ì²¨ë¶€íŒŒì¼ ìë™ ì‚­ì œ
      * AutoDelete: ë§¤ì¼ 23ì‹œ 59ë¶„ 59ì´ˆì— ì‹¤í–‰, DB íŒŒì¼ ë¦¬ìŠ¤íŠ¸ ë°ì´í„°ì™€  AWS S3 íŒŒì¼ ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì™€ ë¹„êµí•©ë‹ˆë‹¤.
  	 ```java
      // DBì— ì—†ëŠ” ì²¨ë¶€ íŒŒì¼ ë§¤ì¼ 23ì‹œ 59ë¶„ ìë™ ì‚­ì œ(aws s3)
	@Scheduled(cron="0 59 23 * * ?")
	public void autoDeleteFiles() throws Exception {
		System.out.println("íŒŒì¼ ì‚­ì œ ì‹œì‘>>>>>>>>>>>>>>>>>>");
		String path=getFolder();
		List<String> fileList=new ArrayList<>();
		List<String> awsList=new ArrayList<>();	
		boolean bln =false;	
		try {
			//DB íŒŒì¼ì •ë³´ ê°€ì ¸ì˜¤ê¸°
			List<BoardAttachVO> dbList= fileDAO.allFiles();
			//aws s3 ë²„í‚·ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
			awsList=awsS3.list(path);			
			dbList.forEach(attach->{
				fileList.add(attach.getFileId()+ "_" +attach.getFileName());				
			});			
			for(String s3Name:awsList) {
				for(String dbName : fileList) {
					if(dbName.equals(s3Name)){
						System.out.println(s3Name+":"+dbName);
						bln=false;
						break;
					}else {
						System.out.println(s3Name+":"+dbName);
						bln=true;
					}					
				}
				if(bln) {
					awsS3.delete(path, s3Name);
				}	
			}
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}
		System.out.println("íŒŒì¼ ì‚­ì œ ë>>>>>>>>>>>>>>>>>>");
	}
   	```
      * AwsS3: DBì— ì—†ëŠ” s3 íŒŒì¼ì„ ìë™ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.
      ```java
      //íŒŒì¼ì‚­ì œ
    public void delete(String path,String key) {
        try {
            //Delete ê°ì²´ ìƒì„±
            DeleteObjectRequest deleteObjectRequest = new DeleteObjectRequest(this.bucket+path, key);
            //Delete
            this.s3Client.deleteObject(deleteObjectRequest);
        } catch (AmazonServiceException e) {
            e.printStackTrace();
        } catch (SdkClientException e) {
            e.printStackTrace();
        }
    }
      ```
---   
      
# í”„ë¡œì íŠ¸ í›„ê¸°ğŸŠğŸ
> ì´ˆê¸° êµ¬ìƒí•œ í”„ë¡œì íŠ¸ëŠ” ê²Œì‹œíŒ ê¸°ëŠ¥ê³¼ íšŒì›ê°€ì…, ë¡œê·¸ì¸ ì •ë„ì˜€ëŠ”ë° ì—¬ëŸ¬ ì‚¬ì´íŠ¸ë“¤ì„ ë¹„êµí•˜ë©´ì„œ ë‚ ì”¨, ì±„íŒ…, ê¶Œí•œì— ë”°ë¥¸ ê¸°ëŠ¥, ê´€ë¦¬ì í˜ì´ì§€, AWSë¥¼ ì´ìš©í•œ ì›¹ ì„œë¹„ìŠ¤ ì œê³µ ë“± ì¢€ ë” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ê³ ë¯¼í•˜ë©° ë„£ë‹¤ ë³´ë‹ˆ ìƒê°ë³´ë‹¤ ê°œë°œ ê¸°ê°„ì´ ì˜¤ë˜ ê±¸ë¦° ê²ƒ ê°™ìŠµë‹ˆë‹¤.  
> í•˜ì§€ë§Œ javascript, SQL ë“± ì „ë³´ë‹¤ ì‰½ê²Œ ì‘ì„± í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìœ¼ë©° ì›¹ ê°œë°œì˜ êµ¬ì¡°ë¥¼ ì´í•´í•  ìˆ˜ ìˆëŠ” ê³„ê¸°ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.

> Security êµ¬ì¡° íŒŒì•…ê³¼ DBì •ë³´ë¥¼ í•˜ë‚˜ì˜ Queryë¬¸ìœ¼ë¡œ ì‘ì„±í•´ ì¶œë ¥, AWSë¥¼ ì‚¬ìš©í•´ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ë¶€ë¶„ì„ ì´í•´í•˜ê³  êµ¬í˜„í•˜ê¸° ìœ„í•´ ê°™ì€ ì£¼ì œì§€ë§Œ ì¡°ê¸ˆì”© ë‹¤ë¥¸ ì½”ë“œë“¤ì„ ë¹„êµí•´ë‚˜ê°€ë©´ì„œ ì´í•´ë¥¼ í•˜ë©´ì„œ ë‚´ í”„ë¡œì íŠ¸ì— ë” ë§ëŠ” ì½”ë“œë¡œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
> 
>ì•„ì‰¬ì—ˆë˜ ì ì€ Spring AOP ê¸°ëŠ¥ì„ í™œìš©í•˜ì§€ ëª»í•œ ë¶€ë¶„ê³¼ ê·¸ë¦¼ì„ ì²¨ë¶€í•´ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥, ì±„íŒ…ë°©ì„ ì—¬ëŸ¬ê°œ ìƒì„±í•´ ì…ì¥í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì§€ ëª»í•œê²Œ ì•„ì‰¬ì› ê³ , ë˜ í˜¼ì ê°œë°œí•œ ì ì´ í° ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê¸°ëŠ¥ê³¼ ì½”ë”© ê°œì„ ì„ í˜¼ì ê³ ë¯¼í•˜ë©´ì„œ ê°œë°œ ì†ë„ë„ ì ì  ëŠë ¤ì§€ê³ , ë‹¤ë¥¸ ì‚¬ëŒì˜ ì½”ë“œë¥¼ ë³´ê³  ì†Œí†µí•  ìˆ˜ ìˆëŠ” ê¸°íšŒë„ ì—†ì–´ ë‚´ ì½”ë“œì— ì§€ì í•  ì‚¬ëŒì´ ì—†ì–´ì„œ ì´ê²Œ ë§ëŠ” ê±´ê°€ ì‹¶ì€ ìƒê°ì´ ë§ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  í˜‘ì—…ì„ ìœ„í•œ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì„ ì˜ í™œìš©í•˜ì§€ ëª»í•´ ì•„ì‰¬ì› ìŠµë‹ˆë‹¤.
>
> ë¶€ì¡±í•œ ë¶€ë¶„ì´ ë§ì€ í”„ë¡œì íŠ¸ì´ì§€ë§Œ ë°°ì› ë˜ ë¶€ë¶„ì„ ë³µìŠµí•˜ê³  ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ê³µë¶€ë¥¼ í•  ìˆ˜ ìˆì–´ì„œ ì¢‹ì•˜ê³ , ê²°ê³¼ë¬¼ì´ ì–´ëŠ ì •ë„ êµ¬ìƒ‰ì´ ê°–ì¶°ì§„ ê²ƒ ê°™ì•„ ë‚´ì‹¬ ë§Œì¡±ìŠ¤ëŸ¬ìš´ í”„ë¡œì íŠ¸ì˜€ìŠµë‹ˆë‹¤. ë¶€ì¡±í•˜ì§€ë§Œ ëê¹Œì§€ ë´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.
